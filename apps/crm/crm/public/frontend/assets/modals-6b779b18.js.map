{"version":3,"file":"modals-6b779b18.js","sources":["../../../../node_modules/@headlessui/vue/dist/internal/focus-sentinel.js","../../../../node_modules/@headlessui/vue/dist/components/tabs/tabs.js","../../../../node_modules/frappe-ui/src/components/Tabs/TabList.vue","../../../../node_modules/frappe-ui/src/components/Tabs/TabPanel.vue","../../../../node_modules/frappe-ui/src/components/Tabs/Tabs.vue","../../../../frontend/src/components/Section.vue","../../../../frontend/src/components/Controls/Password.vue","../../../../frontend/src/components/Controls/FormattedInput.vue","../../../../frontend/src/data/script.js","../../../../frontend/src/data/document.js","../../../../frontend/src/composables/modals.js"],"sourcesContent":["import{defineComponent as i,h as m,ref as f}from\"vue\";import{Features as l,Hidden as F}from'./hidden.js';let d=i({props:{onFocus:{type:Function,required:!0}},setup(t){let n=f(!0);return()=>n.value?m(F,{as:\"button\",type:\"button\",features:l.Focusable,onFocus(o){o.preventDefault();let e,a=50;function r(){var u;if(a--<=0){e&&cancelAnimationFrame(e);return}if((u=t.onFocus)!=null&&u.call(t)){n.value=!1,cancelAnimationFrame(e);return}e=requestAnimationFrame(r)}e=requestAnimationFrame(r)}}):null}});export{d as FocusSentinel};\n","import{computed as v,defineComponent as L,Fragment as z,h as A,inject as j,onMounted as F,onUnmounted as K,provide as N,ref as P,watch as _,watchEffect as J}from\"vue\";import{useId as $}from'../../hooks/use-id.js';import{useResolveButtonType as Q}from'../../hooks/use-resolve-button-type.js';import{FocusSentinel as V}from'../../internal/focus-sentinel.js';import{Hidden as X}from'../../internal/hidden.js';import{Keys as S}from'../../keyboard.js';import{dom as f}from'../../utils/dom.js';import{Focus as g,focusIn as D,FocusResult as B,sortByDomNode as k}from'../../utils/focus-management.js';import{match as H}from'../../utils/match.js';import{microTask as Y}from'../../utils/micro-task.js';import{getOwnerDocument as Z}from'../../utils/owner.js';import{Features as q,omit as ee,render as M}from'../../utils/render.js';var te=(s=>(s[s.Forwards=0]=\"Forwards\",s[s.Backwards=1]=\"Backwards\",s))(te||{}),le=(d=>(d[d.Less=-1]=\"Less\",d[d.Equal=0]=\"Equal\",d[d.Greater=1]=\"Greater\",d))(le||{});let U=Symbol(\"TabsContext\");function C(a){let b=j(U,null);if(b===null){let s=new Error(`<${a} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,C),s}return b}let G=Symbol(\"TabsSSRContext\"),me=L({name:\"TabGroup\",emits:{change:a=>!0},props:{as:{type:[Object,String],default:\"template\"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(a,{slots:b,attrs:s,emit:d}){var E;let i=P((E=a.selectedIndex)!=null?E:a.defaultIndex),l=P([]),r=P([]),p=v(()=>a.selectedIndex!==null),R=v(()=>p.value?a.selectedIndex:i.value);function y(t){var c;let n=k(u.tabs.value,f),o=k(u.panels.value,f),e=n.filter(I=>{var m;return!((m=f(I))!=null&&m.hasAttribute(\"disabled\"))});if(t<0||t>n.length-1){let I=H(i.value===null?0:Math.sign(t-i.value),{[-1]:()=>1,[0]:()=>H(Math.sign(t),{[-1]:()=>0,[0]:()=>0,[1]:()=>1}),[1]:()=>0}),m=H(I,{[0]:()=>n.indexOf(e[0]),[1]:()=>n.indexOf(e[e.length-1])});m!==-1&&(i.value=m),u.tabs.value=n,u.panels.value=o}else{let I=n.slice(0,t),h=[...n.slice(t),...I].find(W=>e.includes(W));if(!h)return;let O=(c=n.indexOf(h))!=null?c:u.selectedIndex.value;O===-1&&(O=u.selectedIndex.value),i.value=O,u.tabs.value=n,u.panels.value=o}}let u={selectedIndex:v(()=>{var t,n;return(n=(t=i.value)!=null?t:a.defaultIndex)!=null?n:null}),orientation:v(()=>a.vertical?\"vertical\":\"horizontal\"),activation:v(()=>a.manual?\"manual\":\"auto\"),tabs:l,panels:r,setSelectedIndex(t){R.value!==t&&d(\"change\",t),p.value||y(t)},registerTab(t){var o;if(l.value.includes(t))return;let n=l.value[i.value];if(l.value.push(t),l.value=k(l.value,f),!p.value){let e=(o=l.value.indexOf(n))!=null?o:i.value;e!==-1&&(i.value=e)}},unregisterTab(t){let n=l.value.indexOf(t);n!==-1&&l.value.splice(n,1)},registerPanel(t){r.value.includes(t)||(r.value.push(t),r.value=k(r.value,f))},unregisterPanel(t){let n=r.value.indexOf(t);n!==-1&&r.value.splice(n,1)}};N(U,u);let T=P({tabs:[],panels:[]}),x=P(!1);F(()=>{x.value=!0}),N(G,v(()=>x.value?null:T.value));let w=v(()=>a.selectedIndex);return F(()=>{_([w],()=>{var t;return y((t=a.selectedIndex)!=null?t:a.defaultIndex)},{immediate:!0})}),J(()=>{if(!p.value||R.value==null||u.tabs.value.length<=0)return;let t=k(u.tabs.value,f);t.some((o,e)=>f(u.tabs.value[e])!==f(o))&&u.setSelectedIndex(t.findIndex(o=>f(o)===f(u.tabs.value[R.value])))}),()=>{let t={selectedIndex:i.value};return A(z,[l.value.length<=0&&A(V,{onFocus:()=>{for(let n of l.value){let o=f(n);if((o==null?void 0:o.tabIndex)===0)return o.focus(),!0}return!1}}),M({theirProps:{...s,...ee(a,[\"selectedIndex\",\"defaultIndex\",\"manual\",\"vertical\",\"onChange\"])},ourProps:{},slot:t,slots:b,attrs:s,name:\"TabGroup\"})])}}}),pe=L({name:\"TabList\",props:{as:{type:[Object,String],default:\"div\"}},setup(a,{attrs:b,slots:s}){let d=C(\"TabList\");return()=>{let i={selectedIndex:d.selectedIndex.value},l={role:\"tablist\",\"aria-orientation\":d.orientation.value};return M({ourProps:l,theirProps:a,slot:i,attrs:b,slots:s,name:\"TabList\"})}}}),xe=L({name:\"Tab\",props:{as:{type:[Object,String],default:\"button\"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(a,{attrs:b,slots:s,expose:d}){var o;let i=(o=a.id)!=null?o:`headlessui-tabs-tab-${$()}`,l=C(\"Tab\"),r=P(null);d({el:r,$el:r}),F(()=>l.registerTab(r)),K(()=>l.unregisterTab(r));let p=j(G),R=v(()=>{if(p.value){let e=p.value.tabs.indexOf(i);return e===-1?p.value.tabs.push(i)-1:e}return-1}),y=v(()=>{let e=l.tabs.value.indexOf(r);return e===-1?R.value:e}),u=v(()=>y.value===l.selectedIndex.value);function T(e){var I;let c=e();if(c===B.Success&&l.activation.value===\"auto\"){let m=(I=Z(r))==null?void 0:I.activeElement,h=l.tabs.value.findIndex(O=>f(O)===m);h!==-1&&l.setSelectedIndex(h)}return c}function x(e){let c=l.tabs.value.map(m=>f(m)).filter(Boolean);if(e.key===S.Space||e.key===S.Enter){e.preventDefault(),e.stopPropagation(),l.setSelectedIndex(y.value);return}switch(e.key){case S.Home:case S.PageUp:return e.preventDefault(),e.stopPropagation(),T(()=>D(c,g.First));case S.End:case S.PageDown:return e.preventDefault(),e.stopPropagation(),T(()=>D(c,g.Last))}if(T(()=>H(l.orientation.value,{vertical(){return e.key===S.ArrowUp?D(c,g.Previous|g.WrapAround):e.key===S.ArrowDown?D(c,g.Next|g.WrapAround):B.Error},horizontal(){return e.key===S.ArrowLeft?D(c,g.Previous|g.WrapAround):e.key===S.ArrowRight?D(c,g.Next|g.WrapAround):B.Error}}))===B.Success)return e.preventDefault()}let w=P(!1);function E(){var e;w.value||(w.value=!0,!a.disabled&&((e=f(r))==null||e.focus({preventScroll:!0}),l.setSelectedIndex(y.value),Y(()=>{w.value=!1})))}function t(e){e.preventDefault()}let n=Q(v(()=>({as:a.as,type:b.type})),r);return()=>{var m,h;let e={selected:u.value,disabled:(m=a.disabled)!=null?m:!1},{...c}=a,I={ref:r,onKeydown:x,onMousedown:t,onClick:E,id:i,role:\"tab\",type:n.value,\"aria-controls\":(h=f(l.panels.value[y.value]))==null?void 0:h.id,\"aria-selected\":u.value,tabIndex:u.value?0:-1,disabled:a.disabled?!0:void 0};return M({ourProps:I,theirProps:c,slot:e,attrs:b,slots:s,name:\"Tab\"})}}}),Ie=L({name:\"TabPanels\",props:{as:{type:[Object,String],default:\"div\"}},setup(a,{slots:b,attrs:s}){let d=C(\"TabPanels\");return()=>{let i={selectedIndex:d.selectedIndex.value};return M({theirProps:a,ourProps:{},slot:i,attrs:s,slots:b,name:\"TabPanels\"})}}}),ye=L({name:\"TabPanel\",props:{as:{type:[Object,String],default:\"div\"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(a,{attrs:b,slots:s,expose:d}){var T;let i=(T=a.id)!=null?T:`headlessui-tabs-panel-${$()}`,l=C(\"TabPanel\"),r=P(null);d({el:r,$el:r}),F(()=>l.registerPanel(r)),K(()=>l.unregisterPanel(r));let p=j(G),R=v(()=>{if(p.value){let x=p.value.panels.indexOf(i);return x===-1?p.value.panels.push(i)-1:x}return-1}),y=v(()=>{let x=l.panels.value.indexOf(r);return x===-1?R.value:x}),u=v(()=>y.value===l.selectedIndex.value);return()=>{var n;let x={selected:u.value},{tabIndex:w,...E}=a,t={ref:r,id:i,role:\"tabpanel\",\"aria-labelledby\":(n=f(l.tabs.value[y.value]))==null?void 0:n.id,tabIndex:u.value?w:-1};return!u.value&&a.unmount&&!a.static?A(X,{as:\"span\",\"aria-hidden\":!0,...t}):M({ourProps:t,theirProps:E,slot:x,attrs:b,slots:s,features:q.Static|q.RenderStrategy,visible:u.value,name:\"TabPanel\"})}}});export{xe as Tab,me as TabGroup,pe as TabList,ye as TabPanel,Ie as TabPanels};\n","<template>\n  <TabList\n    class=\"relative flex\"\n    :class=\"\n      t.vertical\n        ? 'flex-col border-r overflow-y-auto'\n        : 'gap-7.5 border-b overflow-x-auto items-center px-5'\n    \"\n  >\n    <Tab\n      ref=\"tabRef\"\n      as=\"template\"\n      v-for=\"(tab, i) in t.tabs\"\n      :key=\"i\"\n      v-slot=\"{ selected }\"\n      class=\"focus:outline-none focus:transition-none\"\n    >\n      <slot v-bind=\"{ tab, selected }\">\n        <button\n          class=\"flex items-center gap-1.5 text-base text-ink-gray-5 duration-300 ease-in-out hover:text-ink-gray-9\"\n          :class=\"[\n            selected ? 'text-ink-gray-9' : '',\n            t.vertical\n              ? 'py-2.5 px-4 border-r border-transparent hover:border-outline-gray-3'\n              : 'py-3 border-b border-transparent hover:border-outline-gray-3',\n          ]\"\n        >\n          <component v-if=\"tab.icon\" :is=\"tab.icon\" class=\"size-4\" />\n          {{ tab.label }}\n        </button>\n      </slot>\n    </Tab>\n    <div\n      ref=\"indicator\"\n      class=\"tab-indicator absolute bg-surface-gray-7\"\n      :class=\"[t.vertical ? 'right-0 w-px' : 'bottom-0 h-px', transitionClass]\"\n    />\n  </TabList>\n</template>\n<script setup>\nimport { TabList, Tab } from '@headlessui/vue'\nimport { ref, watch, computed, onMounted, nextTick, inject } from 'vue'\n\nconst t = inject('tab')\n\nconst tabRef = ref([])\nconst indicator = ref(null)\nconst tabsLength = computed(() => t.value.tabs.value?.length)\n\nconst transitionClass = ref('')\n\nfunction moveIndicator(index) {\n  if (index >= tabsLength.value) {\n    index = tabsLength.value - 1\n  }\n  const selectedTab = tabRef.value[index].el\n  if (t.value.vertical.value) {\n    indicator.value.style.height = `${selectedTab.offsetHeight}px`\n    indicator.value.style.top = `${selectedTab.offsetTop}px`\n  } else {\n    indicator.value.style.width = `${selectedTab.offsetWidth}px`\n    indicator.value.style.left = `${selectedTab.offsetLeft}px`\n  }\n}\n\nwatch(\n  () => t.value.tabIndex.value,\n  (index) => {\n    if (index >= tabsLength.value) {\n      t.value.tabIndex.value = tabsLength.value - 1\n    }\n    transitionClass.value = 'transition-all duration-300 ease-in-out'\n    nextTick(() => moveIndicator(index))\n  },\n)\n\nonMounted(() => {\n  nextTick(() => moveIndicator(t.value.tabIndex.value))\n  // Fix for indicator not moving on initial load\n  setTimeout(() => moveIndicator(t.value.tabIndex.value), 100)\n})\n</script>\n","<template>\n  <TabPanels class=\"flex flex-1 overflow-hidden\">\n    <TabPanel\n      class=\"flex flex-1 flex-col overflow-y-auto focus:outline-none\"\n      v-for=\"(tab, i) in t.tabs\"\n      :key=\"i\"\n    >\n      <slot v-bind=\"{ tab }\" />\n    </TabPanel>\n  </TabPanels>\n</template>\n<script setup>\nimport { TabPanels, TabPanel } from '@headlessui/vue'\nimport { inject } from 'vue'\n\nconst t = inject('tab')\n</script>\n","<template>\n  <TabGroup\n    v-bind=\"\n      as !== 'template'\n        ? {\n            as,\n            class: ['flex flex-1 overflow-hidden', vertical ? '' : 'flex-col '],\n          }\n        : {}\n    \"\n    :defaultIndex=\"tabIndex\"\n    :selectedIndex=\"tabIndex\"\n    @change=\"(idx) => (tabIndex = idx)\"\n  >\n    <slot>\n      <TabList v-slot=\"{ tab, selected }\">\n        <slot name=\"tab-item\" v-bind=\"{ tab, selected }\" />\n      </TabList>\n      <TabPanel v-slot=\"{ tab }\">\n        <slot name=\"tab-panel\" v-bind=\"{ tab }\" />\n      </TabPanel>\n    </slot>\n  </TabGroup>\n</template>\n\n<script setup>\nimport TabList from './TabList.vue'\nimport TabPanel from './TabPanel.vue'\nimport { TabGroup } from '@headlessui/vue'\nimport { computed, provide } from 'vue'\n\nconst props = defineProps({\n  as: {\n    type: String,\n    default: 'template',\n  },\n  tabs: {\n    type: Array,\n    required: true,\n  },\n  vertical: {\n    type: Boolean,\n    default: false,\n  },\n})\n\nconst tabIndex = defineModel()\n\nprovide(\n  'tab',\n  computed(() => ({\n    tabIndex,\n    tabs: props.tabs,\n    vertical: props.vertical,\n  })),\n)\n</script>\n","<template>\n  <div>\n    <slot name=\"header\" v-bind=\"{ opened, hide, open, close, toggle }\">\n      <div\n        v-if=\"!hide\"\n        class=\"section-header flex items-center justify-between\"\n        :class=\"headerClass\"\n      >\n        <div\n          class=\"flex text-ink-gray-9 max-w-fit cursor-pointer items-center gap-2 text-base\"\n          :class=\"labelClass\"\n          @click=\"collapsible && toggle()\"\n        >\n          <FeatherIcon\n            v-if=\"collapsible && collapseIconPosition === 'left'\"\n            name=\"chevron-right\"\n            class=\"h-4 transition-all duration-300 ease-in-out\"\n            :class=\"{ 'rotate-90': opened }\"\n          />\n          <span>\n            {{ __(label) || __('Untitled') }}\n          </span>\n          <FeatherIcon\n            v-if=\"collapsible && collapseIconPosition === 'right'\"\n            name=\"chevron-right\"\n            class=\"h-4 transition-all duration-300 ease-in-out\"\n            :class=\"{ 'rotate-90': opened }\"\n          />\n        </div>\n        <slot name=\"actions\"></slot>\n      </div>\n    </slot>\n    <transition\n      enter-active-class=\"duration-300 ease-in\"\n      leave-active-class=\"duration-300 ease-[cubic-bezier(0, 1, 0.5, 1)]\"\n      enter-to-class=\"max-h-[200px] overflow-hidden\"\n      leave-from-class=\"max-h-[200px] overflow-hidden\"\n      enter-from-class=\"max-h-0 overflow-hidden\"\n      leave-to-class=\"max-h-0 overflow-hidden\"\n    >\n      <div class=\"columns\" v-bind=\"$attrs\" v-show=\"opened\">\n        <slot v-bind=\"{ opened, open, close, toggle }\" />\n      </div>\n    </transition>\n  </div>\n</template>\n<script setup>\nimport { ref } from 'vue'\n\nconst props = defineProps({\n  label: {\n    type: String,\n    default: '',\n  },\n  hideLabel: {\n    type: Boolean,\n    default: false,\n  },\n  opened: {\n    type: Boolean,\n    default: true,\n  },\n  collapsible: {\n    type: Boolean,\n    default: true,\n  },\n  collapseIconPosition: {\n    type: String,\n    default: 'left',\n  },\n  labelClass: {\n    type: [String, Object, Array],\n    default: '',\n  },\n  headerClass: {\n    type: [String, Object, Array],\n    default: '',\n  },\n})\n\nconst hide = ref(props.hideLabel)\nconst opened = ref(props.opened)\n\nfunction toggle() {\n  opened.value = !opened.value\n}\n\nfunction open() {\n  opened.value = true\n}\n\nfunction close() {\n  opened.value = false\n}\n</script>\n<script>\nexport default {\n  inheritAttrs: false,\n}\n</script>\n","<template>\n  <FormControl\n    :type=\"show ? 'text' : 'password'\"\n    :value=\"modelValue || value\"\n    v-bind=\"$attrs\"\n  >\n    <template #suffix>\n      <Button v-show=\"showEye\" class=\"!h-4\" @click=\"show = !show\">\n        <FeatherIcon :name=\"show ? 'eye-off' : 'eye'\" class=\"h-3\" />\n      </Button>\n    </template>\n  </FormControl>\n</template>\n<script setup>\nimport { FormControl } from 'frappe-ui'\nimport { ref, computed } from 'vue'\nconst props = defineProps({\n  modelValue: {\n    type: [String, Number],\n    default: '',\n  },\n  value: {\n    type: [String, Number],\n    default: '',\n  },\n})\nconst show = ref(false)\nconst showEye = computed(() => {\n  let v = props.modelValue || props.value\n  return !v?.includes('*')\n})\n</script>\n","<template>\n  <TextInput\n    ref=\"inputRef\"\n    :value=\"displayValue\"\n    @focus=\"handleFocus\"\n    @blur=\"isFocused = false\"\n    v-bind=\"$attrs\"\n  />\n  <slot name=\"description\">\n    <p v-if=\"attrs.description\" class=\"mt-1.5\" :class=\"descriptionClasses\">\n      {{ attrs.description }}\n    </p>\n  </slot>\n</template>\n<script setup>\nimport { TextInput } from 'frappe-ui'\nimport { ref, computed, nextTick, useAttrs } from 'vue'\n\nconst props = defineProps({\n  value: {\n    type: [String, Number],\n    default: '',\n  },\n  formattedValue: {\n    type: [String, Number],\n    default: '',\n  },\n})\n\nconst attrs = useAttrs()\n\nconst isFocused = ref(false)\nconst inputRef = ref(null)\n\nfunction handleFocus() {\n  isFocused.value = true\n\n  nextTick(() => {\n    if (inputRef.value) {\n      inputRef.value.el?.select()\n    }\n  })\n}\n\nconst displayValue = computed(() => {\n  return isFocused.value ? props.value : props.formattedValue || props.value\n})\n\nconst descriptionClasses = computed(() => {\n  return [\n    {\n      sm: 'text-xs',\n      md: 'text-base',\n    }[attrs.size || 'sm'],\n    'text-ink-gray-5',\n  ]\n})\n</script>\n","import { globalStore } from '@/stores/global'\nimport { getMeta } from '@/stores/meta'\nimport { call, createListResource, toast } from 'frappe-ui'\nimport { reactive } from 'vue'\nimport router from '@/router'\n\nconst doctypeScripts = reactive({})\n\nexport function getScript(doctype, view = 'Form') {\n  const scripts = createListResource({\n    doctype: 'CRM Form Script',\n    cache: ['Form Scripts', doctype, view],\n    fields: ['name', 'dt', 'view', 'script'],\n    filters: { view, dt: doctype, enabled: 1 },\n    onSuccess: (_scripts) => {\n      for (let script of _scripts) {\n        if (!doctypeScripts[doctype]) {\n          doctypeScripts[doctype] = {}\n        }\n        doctypeScripts[doctype][script.name] = script || {}\n      }\n    },\n    onError: (err) => {\n      console.error(\n        `Error loading CRM Form Scripts for ${doctype} (view: ${view}):`,\n        err,\n      )\n    },\n  })\n\n  if (!doctypeScripts[doctype] && !scripts.loading) {\n    scripts.fetch()\n  }\n\n  async function setupScript(document, helpers = {}) {\n    await scripts.list.promise\n\n    let scriptDefs = doctypeScripts[doctype]\n    if (!scriptDefs || Object.keys(scriptDefs).length === 0) return null\n\n    const { $dialog, $socket, makeCall } = globalStore()\n\n    helpers.createDialog = $dialog\n    helpers.toast = toast\n    helpers.socket = $socket\n    helpers.router = router\n    helpers.call = call\n\n    helpers.throwError = (message) => {\n      toast.error(message || __('An error occurred'))\n      throw new Error(message || __('An error occurred'))\n    }\n\n    helpers.crm = {\n      makePhoneCall: makeCall,\n    }\n\n    return setupMultipleFormControllers(scriptDefs, document, helpers)\n  }\n\n  function setupMultipleFormControllers(scriptStrings, document, helpers) {\n    const controllers = []\n    let parentInstanceIdx = null\n\n    for (let scriptName in scriptStrings) {\n      let script = scriptStrings[scriptName]?.script\n      if (!script) continue\n      try {\n        const classNames = getClassNames(script)\n        if (!classNames) continue\n\n        classNames.forEach((className) => {\n          const FormClass = evaluateFormClass(script, className, helpers)\n          if (!FormClass) return\n\n          let parentInstance = null\n          let doctypeName = doctype.replace(/\\s+/g, '')\n\n          let { doctypeMeta } = getMeta(doctype)\n\n          // if className is not doctype name, then it is a child doctype\n          let isChildDoctype = className !== doctypeName\n\n          if (isChildDoctype) {\n            if (!controllers.length) {\n              console.error(\n                __(\n                  '⚠️ No class found for doctype: {0}, it is mandatory to have a class for the parent doctype. it can be empty, but it should be present.',\n                  [doctype],\n                ),\n              )\n              return\n            }\n            parentInstance = controllers[parentInstanceIdx]\n          } else {\n            parentInstanceIdx = controllers.length || 0\n          }\n\n          const instance = setupFormController(\n            FormClass,\n            doctypeMeta,\n            document,\n            parentInstance,\n            isChildDoctype,\n          )\n\n          controllers.push(instance)\n        })\n      } catch (err) {\n        console.error(__('Failed to load form controller: {0}', [err]))\n      }\n    }\n\n    return controllers\n  }\n\n  function setupFormController(\n    FormClass,\n    meta,\n    document,\n    parentInstance = null,\n    isChildDoctype = false,\n  ) {\n    document.actions = document.actions || []\n    document.statuses = document.statuses || []\n\n    let instance = new FormClass()\n\n    // Store the original document context to be used by properties like 'actions'\n    instance._originalDocumentContext = document\n    instance._isChildDoctype = isChildDoctype\n\n    for (const key in document) {\n      if (document.hasOwnProperty(key)) {\n        instance[key] = document[key]\n      }\n    }\n\n    instance.getMeta = async (doctype) => {\n      if (!meta[doctype]) {\n        await getMeta(doctype)\n        return meta[doctype]\n      }\n      return meta[doctype]\n    }\n\n    const getDoc = () => document.doc\n\n    if (isChildDoctype) {\n      instance.doc = createDocProxy(getDoc, parentInstance, instance)\n\n      if (!parentInstance._childInstances) {\n        parentInstance._childInstances = []\n      }\n\n      parentInstance._childInstances.push(instance)\n    } else {\n      instance.doc = createDocProxy(getDoc, instance)\n    }\n\n    return instance\n  }\n\n  function setupHelperMethods(FormClass) {\n    if (typeof FormClass.prototype.getRow !== 'function') {\n      FormClass.prototype.getRow = function (parentField, idx) {\n        idx = idx || this.currentRowIdx\n\n        let dt = null\n\n        if (this instanceof Array) {\n          const { getFields } = getMeta(this.doc.doctype)\n          let fields = getFields()\n          let field = fields.find((f) => f.fieldname === parentField)\n          dt = field?.options?.replace(/\\s+/g, '')\n\n          if (!idx && dt) {\n            idx = this.find((r) => r.constructor.name === dt)?.currentRowIdx\n          }\n        }\n\n        if (!this.doc[parentField]) {\n          console.warn(\n            __('⚠️ No data found for parent field: {0}', [parentField]),\n          )\n          return null\n        }\n        const row = this.doc[parentField].find((r) => r.idx === idx)\n\n        if (!row) {\n          console.warn(\n            __('⚠️ No row found for idx: {0} in parent field: {1}', [\n              idx,\n              parentField,\n            ]),\n          )\n          return null\n        }\n\n        row.parent = row.parent || this.doc.name\n\n        if (this instanceof Array && dt) {\n          return createDocProxy(\n            row,\n            this.find((r) => r.constructor.name === dt),\n          )\n        }\n\n        return createDocProxy(row, this)\n      }\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(FormClass.prototype, 'actions')) {\n      Object.defineProperty(FormClass.prototype, 'actions', {\n        configurable: true,\n        enumerable: true,\n        get() {\n          if (!this._originalDocumentContext) {\n            console.warn(\n              'CRM Script: _originalDocumentContext not found on instance for actions getter.',\n            )\n            return []\n          }\n\n          return this._originalDocumentContext.actions\n        },\n        set(newValue) {\n          if (!this._originalDocumentContext) {\n            console.warn(\n              'CRM Script: _originalDocumentContext not found on instance for actions setter.',\n            )\n            return\n          }\n          if (!Array.isArray(newValue)) {\n            console.warn(\n              'CRM Script: \"actions\" property must be an array. Value was not set.',\n              newValue,\n            )\n            this._originalDocumentContext.actions = []\n            return\n          }\n          this._originalDocumentContext.actions = newValue\n        },\n      })\n    }\n\n    if (\n      !Object.prototype.hasOwnProperty.call(FormClass.prototype, 'statuses')\n    ) {\n      Object.defineProperty(FormClass.prototype, 'statuses', {\n        configurable: true,\n        enumerable: true,\n        get() {\n          if (!this._originalDocumentContext) {\n            console.warn(\n              'CRM Script: _originalDocumentContext not found on instance for statuses getter.',\n            )\n            return []\n          }\n\n          return this._originalDocumentContext.statuses\n        },\n        set(newValue) {\n          if (!this._originalDocumentContext) {\n            console.warn(\n              'CRM Script: _originalDocumentContext not found on instance for statuses setter.',\n            )\n            return\n          }\n          if (!Array.isArray(newValue)) {\n            console.warn(\n              'CRM Script: \"statuses\" property must be an array. Value was not set.',\n              newValue,\n            )\n            this._originalDocumentContext.statuses = []\n            return\n          }\n          this._originalDocumentContext.statuses = newValue\n        },\n      })\n    }\n  }\n\n  // utility function to setup a form controller\n  function getClassNames(script) {\n    const withoutComments = script\n      .replace(/\\/\\/.*$/gm, '') // Remove single-line comments\n      .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '') // Remove multi-line comments\n\n    // Match class declarations\n    return (\n      [...withoutComments.matchAll(/class\\s+([A-Za-z0-9_]+)/g)].map(\n        (match) => match[1],\n      ) || []\n    )\n  }\n\n  function evaluateFormClass(script, className, helpers = {}) {\n    const helperKeys = Object.keys(helpers)\n    const helperValues = Object.values(helpers)\n\n    const wrappedScript = `\n\t\t${script}\n\t\treturn ${className};\n\t`\n\n    const FormClass = new Function(...helperKeys, wrappedScript)(\n      ...helperValues,\n    )\n\n    setupHelperMethods(FormClass)\n\n    return FormClass\n  }\n\n  function createDocProxy(source, instance, childInstance = null) {\n    const isFunction = typeof source === 'function'\n    const getCurrentData = () => (isFunction ? source() : source)\n\n    return new Proxy(\n      {},\n      {\n        get(target, prop) {\n          const currentDocData = getCurrentData()\n          if (!currentDocData) return undefined\n\n          if (prop === 'trigger') {\n            if (currentDocData && 'trigger' in currentDocData) {\n              console.warn(\n                __(\n                  '⚠️ Avoid using \"trigger\" as a field name — it conflicts with the built-in trigger() method.',\n                ),\n              )\n            }\n\n            return (methodName, ...args) => {\n              const method = instance[methodName]\n              if (typeof method === 'function') {\n                return method.apply(instance, args)\n              } else {\n                console.warn(\n                  __('⚠️ Method \"{0}\" not found in class.', [methodName]),\n                )\n              }\n            }\n          }\n\n          if (prop === 'getRow') {\n            return instance.getRow.bind(\n              childInstance || instance._childInstances || instance,\n            )\n          }\n\n          return currentDocData[prop]\n        },\n        set(target, prop, value) {\n          const currentDocData = getCurrentData()\n          if (!currentDocData) return false\n\n          currentDocData[prop] = value\n          return true\n        },\n        has(target, prop) {\n          const currentDocData = getCurrentData()\n          if (!currentDocData) return false\n          return prop in currentDocData\n        },\n        ownKeys(target) {\n          const currentDocData = getCurrentData()\n          if (!currentDocData) return []\n          return Reflect.ownKeys(currentDocData)\n        },\n        getOwnPropertyDescriptor(target, prop) {\n          const currentDocData = getCurrentData()\n          if (!currentDocData) return undefined\n          return Reflect.getOwnPropertyDescriptor(currentDocData, prop)\n        },\n      },\n    )\n  }\n\n  return {\n    scripts,\n    setupScript,\n    setupFormController,\n  }\n}\n","import { getScript } from '@/data/script'\nimport { runSequentially, parseAssignees } from '@/utils'\nimport { createDocumentResource, createResource, toast } from 'frappe-ui'\nimport { reactive } from 'vue'\n\nconst documentsCache = {}\nconst controllersCache = {}\n\nexport function useDocument(doctype, docname) {\n  const { setupScript } = getScript(doctype)\n\n  documentsCache[doctype] = documentsCache[doctype] || {}\n\n  if (!documentsCache[doctype][docname || '']) {\n    if (docname) {\n      documentsCache[doctype][docname] = createDocumentResource({\n        doctype: doctype,\n        name: docname,\n        onSuccess: async () => await setupFormScript(),\n        setValue: {\n          onSuccess: () => {\n            triggerOnSave()\n            toast.success(__('Document updated successfully'))\n          },\n          onError: (err) => {\n            let errorMessage = __('Error updating document')\n            if (err.exc_type == 'MandatoryError') {\n              const fieldName = err.messages\n                .map((msg) => msg.split(': ')[2].trim())\n                .join(', ')\n              errorMessage = __('Mandatory field error: {0}', [fieldName])\n            }\n            toast.error(errorMessage)\n            console.error(err)\n          },\n        },\n      })\n    } else {\n      documentsCache[doctype][''] = reactive({\n        doc: {},\n      })\n      setupFormScript()\n    }\n  }\n\n  const assignees = createResource({\n    url: 'crm.api.doc.get_assigned_users',\n    cache: `assignees:${doctype}:${docname}`,\n    auto: docname ? true : false,\n    params: {\n      doctype: doctype,\n      name: docname,\n    },\n    transform: (data) => parseAssignees(data),\n  })\n\n  async function setupFormScript() {\n    if (\n      controllersCache[doctype] &&\n      typeof controllersCache[doctype][docname || ''] === 'object'\n    ) {\n      return\n    }\n\n    if (!controllersCache[doctype]) {\n      controllersCache[doctype] = {}\n    }\n\n    controllersCache[doctype][docname || ''] = {}\n\n    const controllersArray = await setupScript(\n      documentsCache[doctype][docname || ''],\n    )\n\n    if (!controllersArray || controllersArray.length === 0) return\n\n    const organizedControllers = {}\n    for (const controller of controllersArray) {\n      const controllerKey = controller.constructor.name // e.g., \"CRMLead\", \"CRMProducts\"\n      if (!organizedControllers[controllerKey]) {\n        organizedControllers[controllerKey] = []\n      }\n      organizedControllers[controllerKey].push(controller)\n    }\n    controllersCache[doctype][docname || ''] = organizedControllers\n\n    triggerOnLoad()\n  }\n\n  function getControllers(row = null) {\n    const _doctype = row?.doctype || doctype\n    const controllerKey = _doctype.replace(/\\s+/g, '')\n\n    const docControllers = controllersCache[doctype]?.[docname || '']\n\n    if (\n      typeof docControllers === 'object' &&\n      docControllers !== null &&\n      !Array.isArray(docControllers)\n    ) {\n      return docControllers[controllerKey] || []\n    }\n    return []\n  }\n\n  async function triggerOnLoad() {\n    const handler = async function () {\n      await (this.onLoad?.() || this.on_load?.() || this.onload?.())\n    }\n    await trigger(handler)\n  }\n\n  async function triggerOnSave() {\n    const handler = async function () {\n      await (this.onSave?.() || this.on_save?.())\n    }\n    await trigger(handler)\n  }\n\n  async function triggerOnRefresh() {\n    const handler = async function () {\n      await this.refresh?.()\n    }\n    await trigger(handler)\n  }\n\n  async function triggerOnChange(fieldname, value, row) {\n    const oldValue = documentsCache[doctype][docname || ''].doc[fieldname]\n    documentsCache[doctype][docname || ''].doc[fieldname] = value\n\n    const handler = async function () {\n      this.value = value\n      this.oldValue = oldValue\n      if (row) {\n        this.currentRowIdx = row.idx\n      }\n      await this[fieldname]?.()\n    }\n\n    try {\n      await trigger(handler, row)\n    } catch (error) {\n      documentsCache[doctype][docname || ''].doc[fieldname] = oldValue\n      console.error(handler)\n      throw error\n    }\n  }\n\n  async function triggerOnRowAdd(row) {\n    const handler = async function () {\n      this.currentRowIdx = row.idx\n      this.value = row\n      await this[row.parentfield + '_add']?.()\n    }\n\n    await trigger(handler, row)\n  }\n\n  async function triggerOnRowRemove(selectedRows, rows) {\n    const handler = async function () {\n      if (selectedRows.size === 1) {\n        const selectedRow = Array.from(selectedRows)[0]\n        this.currentRowIdx = rows.find((r) => r.name === selectedRow).idx\n      } else {\n        delete this.currentRowIdx\n      }\n\n      this.selectedRows = Array.from(selectedRows)\n      this.rows = rows\n\n      await this[rows[0].parentfield + '_remove']?.()\n    }\n\n    await trigger(handler, rows[0])\n  }\n\n  async function triggerOnCreateLead() {\n    const args = Array.from(arguments)\n    const handler = async function () {\n      await (this.onCreateLead?.(...args) || this.on_create_lead?.(...args))\n    }\n    await trigger(handler)\n  }\n\n  async function triggerConvertToDeal() {\n    const args = Array.from(arguments)\n    const handler = async function () {\n      await (this.convertToDeal?.(...args) ||\n        this.on_convert_to_deal?.(...args))\n    }\n    await trigger(handler)\n  }\n\n  async function trigger(taskFn, row = null) {\n    const controllers = getControllers(row)\n    if (!controllers.length) return\n\n    const tasks = controllers.map(\n      (controller) => async () => await taskFn.call(controller),\n    )\n\n    await runSequentially(tasks)\n  }\n\n  function getOldValue(fieldname, row) {\n    if (!documentsCache[doctype][docname || '']) return ''\n\n    const document = documentsCache[doctype][docname || '']\n    const oldDoc = document.originalDoc\n\n    if (row?.name) {\n      return oldDoc?.[row.parentfield]?.find((r) => r.name === row.name)?.[\n        fieldname\n      ]\n    }\n\n    return oldDoc?.[fieldname] || document.doc[fieldname]\n  }\n\n  return {\n    document: documentsCache[doctype][docname || ''],\n    assignees,\n    getControllers,\n    triggerOnLoad,\n    triggerOnSave,\n    triggerOnRefresh,\n    triggerOnChange,\n    triggerOnRowAdd,\n    triggerOnRowRemove,\n    setupFormScript,\n    triggerOnCreateLead,\n    triggerConvertToDeal,\n  }\n}\n","import { ref } from 'vue'\n\nexport const showQuickEntryModal = ref(false)\nexport const quickEntryProps = ref({})\n\nexport const showAddressModal = ref(false)\nexport const addressProps = ref({})\n\nexport const showAboutModal = ref(false)\n"],"names":["d","i","t","n","f","m","F","l","o","e","a","r","te","s","le","U","C","b","j","G","me","L","E","P","p","v","R","y","c","k","u","I","H","h","W","O","N","T","x","w","_","J","A","z","V","M","ee","pe","xe","$","K","B","Z","S","D","g","Y","Q","Ie","ye","X","q","inject","tabRef","ref","indicator","tabsLength","computed","_a","transitionClass","moveIndicator","index","selectedTab","watch","nextTick","onMounted","props","__props","tabIndex","_useModel","provide","__default__","hide","opened","toggle","open","close","show","showEye","attrs","useAttrs","isFocused","inputRef","handleFocus","displayValue","descriptionClasses","doctypeScripts","reactive","getScript","doctype","view","scripts","createListResource","_scripts","script","err","setupScript","document","helpers","scriptDefs","$dialog","$socket","makeCall","globalStore","toast","router","call","message","setupMultipleFormControllers","scriptStrings","controllers","parentInstanceIdx","scriptName","classNames","getClassNames","className","FormClass","evaluateFormClass","parentInstance","doctypeName","doctypeMeta","getMeta","isChildDoctype","instance","setupFormController","meta","key","getDoc","createDocProxy","setupHelperMethods","parentField","idx","dt","getFields","field","_b","row","newValue","match","helperKeys","helperValues","wrappedScript","source","childInstance","isFunction","getCurrentData","target","prop","currentDocData","methodName","args","method","value","documentsCache","controllersCache","useDocument","docname","createDocumentResource","setupFormScript","triggerOnSave","errorMessage","fieldName","msg","assignees","createResource","data","parseAssignees","controllersArray","organizedControllers","controller","controllerKey","triggerOnLoad","getControllers","docControllers","trigger","_c","triggerOnRefresh","triggerOnChange","fieldname","oldValue","handler","error","triggerOnRowAdd","triggerOnRowRemove","selectedRows","rows","selectedRow","triggerOnCreateLead","triggerConvertToDeal","taskFn","tasks","runSequentially","showQuickEntryModal","quickEntryProps","showAddressModal","addressProps","showAboutModal"],"mappings":"8oBAAyG,IAAIA,GAAEC,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,SAAS,SAAS,EAAE,CAAC,EAAE,MAAMC,EAAE,CAAC,IAAIC,EAAEC,EAAE,EAAE,EAAE,MAAM,IAAID,EAAE,MAAME,EAAEC,GAAE,CAAC,GAAG,SAAS,KAAK,SAAS,SAASC,GAAE,UAAU,QAAQC,EAAE,CAACA,EAAE,eAAgB,EAAC,IAAIC,EAAEC,EAAE,GAAG,SAASC,GAAG,CAAC,IAAI,EAAE,GAAGD,KAAK,EAAE,CAACD,GAAG,qBAAqBA,CAAC,EAAE,MAAM,CAAC,IAAI,EAAEP,EAAE,UAAU,MAAM,EAAE,KAAKA,CAAC,EAAE,CAACC,EAAE,MAAM,GAAG,qBAAqBM,CAAC,EAAE,MAAM,CAACA,EAAE,sBAAsBE,CAAC,CAAC,CAACF,EAAE,sBAAsBE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,ECAsU,IAAIC,IAAIC,IAAIA,EAAEA,EAAE,SAAS,CAAC,EAAE,WAAWA,EAAEA,EAAE,UAAU,CAAC,EAAE,YAAYA,IAAID,IAAI,CAAE,CAAA,EAAEE,IAAId,IAAIA,EAAEA,EAAE,KAAK,EAAE,EAAE,OAAOA,EAAEA,EAAE,MAAM,CAAC,EAAE,QAAQA,EAAEA,EAAE,QAAQ,CAAC,EAAE,UAAUA,IAAIc,IAAI,CAAA,CAAE,EAAE,IAAIC,GAAE,OAAO,aAAa,EAAE,SAASC,EAAEN,EAAE,CAAC,IAAIO,EAAEC,EAAEH,GAAE,IAAI,EAAE,GAAGE,IAAI,KAAK,CAAC,IAAIJ,EAAE,IAAI,MAAM,IAAIH,CAAC,iDAAiD,EAAE,MAAM,MAAM,mBAAmB,MAAM,kBAAkBG,EAAEG,CAAC,EAAEH,CAAC,CAAC,OAAOI,CAAC,CAAC,IAAIE,GAAE,OAAO,gBAAgB,EAAEC,GAAGC,EAAE,CAAC,KAAK,WAAW,MAAM,CAAC,OAAOX,GAAG,EAAE,EAAE,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,MAAM,EAAE,QAAQ,UAAU,EAAE,cAAc,CAAC,KAAK,CAAC,MAAM,EAAE,QAAQ,IAAI,EAAE,aAAa,CAAC,KAAK,CAAC,MAAM,EAAE,QAAQ,CAAC,EAAE,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,QAAQ,EAAE,EAAE,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,QAAQ,EAAE,CAAC,EAAE,aAAa,GAAG,MAAMA,EAAE,CAAC,MAAMO,EAAE,MAAMJ,EAAE,KAAKb,CAAC,EAAE,CAAC,IAAIsB,EAAE,IAAI,EAAEC,GAAGD,EAAEZ,EAAE,gBAAgB,KAAKY,EAAEZ,EAAE,YAAY,EAAEH,EAAEgB,EAAE,EAAE,EAAEZ,EAAEY,EAAE,CAAE,CAAA,EAAEC,EAAEC,EAAE,IAAIf,EAAE,gBAAgB,IAAI,EAAEgB,EAAED,EAAE,IAAID,EAAE,MAAMd,EAAE,cAAc,EAAE,KAAK,EAAE,SAASiB,EAAE,EAAE,CAAC,IAAIC,EAAE,IAAI,EAAEC,EAAEC,EAAE,KAAK,MAAM1B,CAAC,EAAEI,EAAEqB,EAAEC,EAAE,OAAO,MAAM1B,CAAC,EAAEK,EAAE,EAAE,OAAOsB,GAAG,CAAC,IAAI1B,EAAE,MAAM,GAAGA,EAAED,EAAE2B,CAAC,IAAI,MAAM1B,EAAE,aAAa,UAAU,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,OAAO,EAAE,CAAC,IAAI0B,EAAEC,EAAE,EAAE,QAAQ,KAAK,EAAE,KAAK,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,EAAG,EAAG,IAAIA,EAAE,KAAK,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,EAAG,EAAG,IAAI,EAAG,EAAG,IAAI,CAAC,CAAC,EAAG,EAAG,IAAI,CAAC,CAAC,EAAE3B,EAAE2B,EAAED,EAAE,CAAE,EAAG,IAAI,EAAE,QAAQtB,EAAE,CAAC,CAAC,EAAG,EAAG,IAAI,EAAE,QAAQA,EAAEA,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,EAAEJ,IAAI,KAAK,EAAE,MAAMA,GAAGyB,EAAE,KAAK,MAAM,EAAEA,EAAE,OAAO,MAAMtB,CAAC,KAAK,CAAC,IAAIuB,EAAE,EAAE,MAAM,EAAE,CAAC,EAAEE,EAAE,CAAC,GAAG,EAAE,MAAM,CAAC,EAAE,GAAGF,CAAC,EAAE,KAAKG,GAAGzB,EAAE,SAASyB,CAAC,CAAC,EAAE,GAAG,CAACD,EAAE,OAAO,IAAIE,GAAGP,EAAE,EAAE,QAAQK,CAAC,IAAI,KAAKL,EAAEE,EAAE,cAAc,MAAMK,IAAI,KAAKA,EAAEL,EAAE,cAAc,OAAO,EAAE,MAAMK,EAAEL,EAAE,KAAK,MAAM,EAAEA,EAAE,OAAO,MAAMtB,CAAC,CAAC,CAAC,IAAIsB,EAAE,CAAC,cAAcL,EAAE,IAAI,CAAC,IAAI,EAAEtB,EAAE,OAAOA,GAAG,EAAE,EAAE,QAAQ,KAAK,EAAEO,EAAE,eAAe,KAAKP,EAAE,IAAI,CAAC,EAAE,YAAYsB,EAAE,IAAIf,EAAE,SAAS,WAAW,YAAY,EAAE,WAAWe,EAAE,IAAIf,EAAE,OAAO,SAAS,MAAM,EAAE,KAAKH,EAAE,OAAOI,EAAE,iBAAiB,EAAE,CAACe,EAAE,QAAQ,GAAG1B,EAAE,SAAS,CAAC,EAAEwB,EAAE,OAAOG,EAAE,CAAC,CAAC,EAAE,YAAY,EAAE,CAAC,IAAInB,EAAE,GAAGD,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,IAAI,EAAEA,EAAE,MAAM,EAAE,KAAK,EAAE,GAAGA,EAAE,MAAM,KAAK,CAAC,EAAEA,EAAE,MAAMsB,EAAEtB,EAAE,MAAMH,CAAC,EAAE,CAACoB,EAAE,MAAM,CAAC,IAAIf,GAAGD,EAAED,EAAE,MAAM,QAAQ,CAAC,IAAI,KAAKC,EAAE,EAAE,MAAMC,IAAI,KAAK,EAAE,MAAMA,EAAE,CAAC,EAAE,cAAc,EAAE,CAAC,IAAIN,EAAEI,EAAE,MAAM,QAAQ,CAAC,EAAEJ,IAAI,IAAII,EAAE,MAAM,OAAOJ,EAAE,CAAC,CAAC,EAAE,cAAc,EAAE,CAACQ,EAAE,MAAM,SAAS,CAAC,IAAIA,EAAE,MAAM,KAAK,CAAC,EAAEA,EAAE,MAAMkB,EAAElB,EAAE,MAAMP,CAAC,EAAE,EAAE,gBAAgB,EAAE,CAAC,IAAID,EAAEQ,EAAE,MAAM,QAAQ,CAAC,EAAER,IAAI,IAAIQ,EAAE,MAAM,OAAOR,EAAE,CAAC,CAAC,CAAC,EAAEiC,GAAErB,GAAEe,CAAC,EAAE,IAAIO,EAAEd,EAAE,CAAC,KAAK,CAAE,EAAC,OAAO,CAAA,CAAE,CAAC,EAAEe,EAAEf,EAAE,EAAE,EAAEjB,EAAE,IAAI,CAACgC,EAAE,MAAM,EAAE,CAAC,EAAEF,GAAEjB,GAAEM,EAAE,IAAIa,EAAE,MAAM,KAAKD,EAAE,KAAK,CAAC,EAAE,IAAIE,EAAEd,EAAE,IAAIf,EAAE,aAAa,EAAE,OAAOJ,EAAE,IAAI,CAACkC,GAAE,CAACD,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,OAAOZ,GAAG,EAAEjB,EAAE,gBAAgB,KAAK,EAAEA,EAAE,YAAY,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,EAAE+B,GAAE,IAAI,CAAC,GAAG,CAACjB,EAAE,OAAOE,EAAE,OAAO,MAAMI,EAAE,KAAK,MAAM,QAAQ,EAAE,OAAO,IAAI,EAAED,EAAEC,EAAE,KAAK,MAAM1B,CAAC,EAAE,EAAE,KAAK,CAACI,EAAEC,IAAIL,EAAE0B,EAAE,KAAK,MAAMrB,CAAC,CAAC,IAAIL,EAAEI,CAAC,CAAC,GAAGsB,EAAE,iBAAiB,EAAE,UAAUtB,GAAGJ,EAAEI,CAAC,IAAIJ,EAAE0B,EAAE,KAAK,MAAMJ,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,cAAc,EAAE,KAAK,EAAE,OAAOgB,EAAEC,GAAE,CAACpC,EAAE,MAAM,QAAQ,GAAGmC,EAAEE,GAAE,CAAC,QAAQ,IAAI,CAAC,QAAQzC,KAAKI,EAAE,MAAM,CAAC,IAAIC,EAAEJ,EAAED,CAAC,EAAE,IAAIK,GAAG,KAAK,OAAOA,EAAE,YAAY,EAAE,OAAOA,EAAE,MAAK,EAAG,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,EAAEqC,EAAE,CAAC,WAAW,CAAC,GAAGhC,EAAE,GAAGiC,GAAGpC,EAAE,CAAC,gBAAgB,eAAe,SAAS,WAAW,UAAU,CAAC,CAAC,EAAE,SAAS,CAAA,EAAG,KAAK,EAAE,MAAMO,EAAE,MAAMJ,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEkC,GAAG1B,EAAE,CAAC,KAAK,UAAU,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,MAAM,EAAE,QAAQ,KAAK,CAAC,EAAE,MAAMX,EAAE,CAAC,MAAMO,EAAE,MAAMJ,CAAC,EAAE,CAAC,IAAIb,EAAEgB,EAAE,SAAS,EAAE,MAAM,IAAI,CAAC,IAAIf,EAAE,CAAC,cAAcD,EAAE,cAAc,KAAK,EAAEO,EAAE,CAAC,KAAK,UAAU,mBAAmBP,EAAE,YAAY,KAAK,EAAE,OAAO6C,EAAE,CAAC,SAAStC,EAAE,WAAWG,EAAE,KAAKT,EAAE,MAAMgB,EAAE,MAAMJ,EAAE,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEmC,GAAG3B,EAAE,CAAC,KAAK,MAAM,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,MAAM,EAAE,QAAQ,QAAQ,EAAE,SAAS,CAAC,KAAK,CAAC,OAAO,EAAE,QAAQ,EAAE,EAAE,GAAG,CAAC,KAAK,OAAO,QAAQ,IAAI,CAAC,EAAE,MAAMX,EAAE,CAAC,MAAMO,EAAE,MAAMJ,EAAE,OAAOb,CAAC,EAAE,CAAC,IAAIQ,EAAE,IAAIP,GAAGO,EAAEE,EAAE,KAAK,KAAKF,EAAE,uBAAuByC,GAAC,CAAE,GAAG1C,EAAES,EAAE,KAAK,EAAEL,EAAEY,EAAE,IAAI,EAAEvB,EAAE,CAAC,GAAGW,EAAE,IAAIA,CAAC,CAAC,EAAEL,EAAE,IAAIC,EAAE,YAAYI,CAAC,CAAC,EAAEuC,GAAE,IAAI3C,EAAE,cAAcI,CAAC,CAAC,EAAE,IAAIa,EAAEN,EAAEC,EAAC,EAAEO,EAAED,EAAE,IAAI,CAAC,GAAGD,EAAE,MAAM,CAAC,IAAIf,EAAEe,EAAE,MAAM,KAAK,QAAQvB,CAAC,EAAE,OAAOQ,IAAI,GAAGe,EAAE,MAAM,KAAK,KAAKvB,CAAC,EAAE,EAAEQ,CAAC,CAAC,MAAM,EAAE,CAAC,EAAEkB,EAAEF,EAAE,IAAI,CAAC,IAAIhB,EAAEF,EAAE,KAAK,MAAM,QAAQI,CAAC,EAAE,OAAOF,IAAI,GAAGiB,EAAE,MAAMjB,CAAC,CAAC,EAAEqB,EAAEL,EAAE,IAAIE,EAAE,QAAQpB,EAAE,cAAc,KAAK,EAAE,SAAS8B,EAAE5B,EAAE,CAAC,IAAIsB,EAAE,IAAIH,EAAEnB,EAAC,EAAG,GAAGmB,IAAIuB,EAAE,SAAS5C,EAAE,WAAW,QAAQ,OAAO,CAAC,IAAIF,GAAG0B,EAAEqB,GAAEzC,CAAC,IAAI,KAAK,OAAOoB,EAAE,cAAcE,EAAE1B,EAAE,KAAK,MAAM,UAAU4B,GAAG/B,EAAE+B,CAAC,IAAI9B,CAAC,EAAE4B,IAAI,IAAI1B,EAAE,iBAAiB0B,CAAC,CAAC,CAAC,OAAOL,CAAC,CAAC,SAASU,EAAE7B,EAAE,CAAC,IAAImB,EAAErB,EAAE,KAAK,MAAM,IAAIF,GAAGD,EAAEC,CAAC,CAAC,EAAE,OAAO,OAAO,EAAE,GAAGI,EAAE,MAAM4C,EAAE,OAAO5C,EAAE,MAAM4C,EAAE,MAAM,CAAC5C,EAAE,iBAAiBA,EAAE,kBAAkBF,EAAE,iBAAiBoB,EAAE,KAAK,EAAE,MAAM,CAAC,OAAOlB,EAAE,IAAG,CAAE,KAAK4C,EAAE,KAAK,KAAKA,EAAE,OAAO,OAAO5C,EAAE,iBAAiBA,EAAE,gBAAe,EAAG4B,EAAE,IAAIiB,EAAE1B,EAAE2B,EAAE,KAAK,CAAC,EAAE,KAAKF,EAAE,IAAI,KAAKA,EAAE,SAAS,OAAO5C,EAAE,eAAgB,EAACA,EAAE,kBAAkB4B,EAAE,IAAIiB,EAAE1B,EAAE2B,EAAE,IAAI,CAAC,CAAC,CAAC,GAAGlB,EAAE,IAAIL,EAAEzB,EAAE,YAAY,MAAM,CAAC,UAAU,CAAC,OAAOE,EAAE,MAAM4C,EAAE,QAAQC,EAAE1B,EAAE2B,EAAE,SAASA,EAAE,UAAU,EAAE9C,EAAE,MAAM4C,EAAE,UAAUC,EAAE1B,EAAE2B,EAAE,KAAKA,EAAE,UAAU,EAAEJ,EAAE,KAAK,EAAE,YAAY,CAAC,OAAO1C,EAAE,MAAM4C,EAAE,UAAUC,EAAE1B,EAAE2B,EAAE,SAASA,EAAE,UAAU,EAAE9C,EAAE,MAAM4C,EAAE,WAAWC,EAAE1B,EAAE2B,EAAE,KAAKA,EAAE,UAAU,EAAEJ,EAAE,KAAK,CAAC,CAAC,CAAC,IAAIA,EAAE,QAAQ,OAAO1C,EAAE,eAAgB,CAAA,CAAC,IAAI8B,EAAEhB,EAAE,EAAE,EAAE,SAASD,GAAG,CAAC,IAAIb,EAAE8B,EAAE,QAAQA,EAAE,MAAM,GAAG,CAAC7B,EAAE,YAAYD,EAAEL,EAAEO,CAAC,IAAI,MAAMF,EAAE,MAAM,CAAC,cAAc,EAAE,CAAC,EAAEF,EAAE,iBAAiBoB,EAAE,KAAK,EAAE6B,GAAE,IAAI,CAACjB,EAAE,MAAM,EAAE,CAAC,GAAG,CAAC,SAASrC,EAAEO,EAAE,CAACA,EAAE,eAAgB,CAAA,CAAC,IAAI,EAAEgD,GAAEhC,EAAE,KAAK,CAAC,GAAGf,EAAE,GAAG,KAAKO,EAAE,IAAI,EAAE,EAAEN,CAAC,EAAE,MAAM,IAAI,CAAC,IAAIN,EAAE4B,EAAE,IAAIxB,EAAE,CAAC,SAASqB,EAAE,MAAM,UAAUzB,EAAEK,EAAE,WAAW,KAAKL,EAAE,EAAE,EAAE,CAAC,GAAGuB,CAAC,EAAElB,EAAEqB,EAAE,CAAC,IAAIpB,EAAE,UAAU2B,EAAE,YAAYpC,EAAE,QAAQoB,EAAE,GAAGrB,EAAE,KAAK,MAAM,KAAK,EAAE,MAAM,iBAAiBgC,EAAE7B,EAAEG,EAAE,OAAO,MAAMoB,EAAE,KAAK,CAAC,IAAI,KAAK,OAAOM,EAAE,GAAG,gBAAgBH,EAAE,MAAM,SAASA,EAAE,MAAM,EAAE,GAAG,SAASpB,EAAE,SAAS,GAAG,MAAM,EAAE,OAAOmC,EAAE,CAAC,SAASd,EAAE,WAAWH,EAAE,KAAKnB,EAAE,MAAMQ,EAAE,MAAMJ,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE6C,GAAGrC,EAAE,CAAC,KAAK,YAAY,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,MAAM,EAAE,QAAQ,KAAK,CAAC,EAAE,MAAMX,EAAE,CAAC,MAAMO,EAAE,MAAMJ,CAAC,EAAE,CAAC,IAAIb,EAAEgB,EAAE,WAAW,EAAE,MAAM,IAAI,CAAC,IAAIf,EAAE,CAAC,cAAcD,EAAE,cAAc,KAAK,EAAE,OAAO6C,EAAE,CAAC,WAAWnC,EAAE,SAAS,CAAA,EAAG,KAAKT,EAAE,MAAMY,EAAE,MAAMI,EAAE,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE0C,GAAGtC,EAAE,CAAC,KAAK,WAAW,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,MAAM,EAAE,QAAQ,KAAK,EAAE,OAAO,CAAC,KAAK,QAAQ,QAAQ,EAAE,EAAE,QAAQ,CAAC,KAAK,QAAQ,QAAQ,EAAE,EAAE,GAAG,CAAC,KAAK,OAAO,QAAQ,IAAI,EAAE,SAAS,CAAC,KAAK,OAAO,QAAQ,CAAC,CAAC,EAAE,MAAMX,EAAE,CAAC,MAAMO,EAAE,MAAMJ,EAAE,OAAOb,CAAC,EAAE,CAAC,IAAIqC,EAAE,IAAIpC,GAAGoC,EAAE3B,EAAE,KAAK,KAAK2B,EAAE,yBAAyBY,GAAC,CAAE,GAAG1C,EAAES,EAAE,UAAU,EAAEL,EAAEY,EAAE,IAAI,EAAEvB,EAAE,CAAC,GAAGW,EAAE,IAAIA,CAAC,CAAC,EAAEL,EAAE,IAAIC,EAAE,cAAcI,CAAC,CAAC,EAAEuC,GAAE,IAAI3C,EAAE,gBAAgBI,CAAC,CAAC,EAAE,IAAIa,EAAEN,EAAEC,EAAC,EAAEO,EAAED,EAAE,IAAI,CAAC,GAAGD,EAAE,MAAM,CAAC,IAAIc,EAAEd,EAAE,MAAM,OAAO,QAAQvB,CAAC,EAAE,OAAOqC,IAAI,GAAGd,EAAE,MAAM,OAAO,KAAKvB,CAAC,EAAE,EAAEqC,CAAC,CAAC,MAAM,EAAE,CAAC,EAAEX,EAAEF,EAAE,IAAI,CAAC,IAAIa,EAAE/B,EAAE,OAAO,MAAM,QAAQI,CAAC,EAAE,OAAO2B,IAAI,GAAGZ,EAAE,MAAMY,CAAC,CAAC,EAAER,EAAEL,EAAE,IAAIE,EAAE,QAAQpB,EAAE,cAAc,KAAK,EAAE,MAAM,IAAI,CAAC,IAAIJ,EAAE,IAAImC,EAAE,CAAC,SAASR,EAAE,KAAK,EAAE,CAAC,SAASS,EAAE,GAAGjB,CAAC,EAAEZ,EAAER,EAAE,CAAC,IAAIS,EAAE,GAAGV,EAAE,KAAK,WAAW,mBAAmBE,EAAEC,EAAEG,EAAE,KAAK,MAAMoB,EAAE,KAAK,CAAC,IAAI,KAAK,OAAOxB,EAAE,GAAG,SAAS2B,EAAE,MAAMS,EAAE,EAAE,EAAE,MAAM,CAACT,EAAE,OAAOpB,EAAE,SAAS,CAACA,EAAE,OAAOgC,EAAEkB,GAAE,CAAC,GAAG,OAAO,cAAc,GAAG,GAAG1D,CAAC,CAAC,EAAE2C,EAAE,CAAC,SAAS3C,EAAE,WAAWoB,EAAE,KAAKgB,EAAE,MAAMrB,EAAE,MAAMJ,EAAE,SAASgD,GAAE,OAAOA,GAAE,eAAe,QAAQ/B,EAAE,MAAM,KAAK,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,sCC2CzqO,MAAM5B,EAAI4D,EAAO,KAAK,EAEhBC,EAASC,EAAI,EAAE,EACfC,EAAYD,EAAI,IAAI,EACpBE,EAAaC,EAAS,WAAM,OAAAC,EAAAlE,EAAE,MAAM,KAAK,QAAb,YAAAkE,EAAoB,OAAM,EAEtDC,EAAkBL,EAAI,EAAE,EAE9B,SAASM,EAAcC,EAAO,CACxBA,GAASL,EAAW,QACtBK,EAAQL,EAAW,MAAQ,GAE7B,MAAMM,EAAcT,EAAO,MAAMQ,CAAK,EAAE,GACpCrE,EAAE,MAAM,SAAS,OACnB+D,EAAU,MAAM,MAAM,OAAS,GAAGO,EAAY,YAAY,KAC1DP,EAAU,MAAM,MAAM,IAAM,GAAGO,EAAY,SAAS,OAEpDP,EAAU,MAAM,MAAM,MAAQ,GAAGO,EAAY,WAAW,KACxDP,EAAU,MAAM,MAAM,KAAO,GAAGO,EAAY,UAAU,KAE1D,CAEA,OAAAC,GACE,IAAMvE,EAAE,MAAM,SAAS,MACtBqE,GAAU,CACLA,GAASL,EAAW,QACtBhE,EAAE,MAAM,SAAS,MAAQgE,EAAW,MAAQ,GAE9CG,EAAgB,MAAQ,0CACxBK,GAAS,IAAMJ,EAAcC,CAAK,CAAC,CACpC,CACH,EAEAI,EAAU,IAAM,CACdD,GAAS,IAAMJ,EAAcpE,EAAE,MAAM,SAAS,KAAK,CAAC,EAEpD,WAAW,IAAMoE,EAAcpE,EAAE,MAAM,SAAS,KAAK,EAAG,GAAG,CAC7D,CAAC,mgCCjED,MAAMA,EAAI4D,EAAO,KAAK,ofCgBtB,MAAMc,EAAQC,EAeRC,EAAWC,GAAYF,EAAA,YAAA,EAE7B,OAAAG,GACE,MACAb,EAAS,KAAO,CACd,SAAAW,EACA,KAAMF,EAAM,KACZ,SAAUA,EAAM,QACpB,EAAI,CACJ,2dCyCeK,GAAA,CACb,aAAc,EAChB,4VAjDA,MAAML,EAAQC,EA+BRK,EAAOlB,EAAIY,EAAM,SAAS,EAC1BO,EAASnB,EAAIY,EAAM,MAAM,EAE/B,SAASQ,GAAS,CAChBD,EAAO,MAAQ,CAACA,EAAO,KACzB,CAEA,SAASE,GAAO,CACdF,EAAO,MAAQ,EACjB,CAEA,SAASG,GAAQ,CACfH,EAAO,MAAQ,EACjB,i9CC7EA,MAAMP,EAAQC,EAURU,EAAOvB,EAAI,EAAK,EAChBwB,EAAUrB,EAAS,IAAM,CAC7B,IAAI1C,EAAImD,EAAM,YAAcA,EAAM,MAClC,MAAO,EAACnD,GAAA,MAAAA,EAAG,SAAS,KACtB,CAAC,ofCZD,MAAMmD,EAAQC,EAWRY,EAAQC,GAAS,EAEjBC,EAAY3B,EAAI,EAAK,EACrB4B,EAAW5B,EAAI,IAAI,EAEzB,SAAS6B,GAAc,CACrBF,EAAU,MAAQ,GAElBjB,GAAS,IAAM,OACTkB,EAAS,SACXxB,EAAAwB,EAAS,MAAM,KAAf,MAAAxB,EAAmB,SAEzB,CAAG,CACH,CAEA,MAAM0B,EAAe3B,EAAS,IACrBwB,EAAU,MAAQf,EAAM,MAAQA,EAAM,gBAAkBA,EAAM,KACtE,EAEKmB,EAAqB5B,EAAS,IAC3B,CACL,CACE,GAAI,UACJ,GAAI,WACV,EAAMsB,EAAM,MAAQ,IAAI,EACpB,iBACF,CACD,wSClDKO,EAAiBC,GAAS,EAAE,EAE3B,SAASC,GAAUC,EAASC,EAAO,OAAQ,CAChD,MAAMC,EAAUC,GAAmB,CACjC,QAAS,kBACT,MAAO,CAAC,eAAgBH,EAASC,CAAI,EACrC,OAAQ,CAAC,OAAQ,KAAM,OAAQ,QAAQ,EACvC,QAAS,CAAE,KAAAA,EAAM,GAAID,EAAS,QAAS,CAAG,EAC1C,UAAYI,GAAa,CACvB,QAASC,KAAUD,EACZP,EAAeG,CAAO,IACzBH,EAAeG,CAAO,EAAI,CAAE,GAE9BH,EAAeG,CAAO,EAAEK,EAAO,IAAI,EAAIA,GAAU,CAAE,CAEtD,EACD,QAAUC,GAAQ,CAChB,QAAQ,MACN,sCAAsCN,CAAO,WAAWC,CAAI,KAC5DK,CACD,CACF,CACL,CAAG,EAEG,CAACT,EAAeG,CAAO,GAAK,CAACE,EAAQ,SACvCA,EAAQ,MAAO,EAGjB,eAAeK,EAAYC,EAAUC,EAAU,GAAI,CACjD,MAAMP,EAAQ,KAAK,QAEnB,IAAIQ,EAAab,EAAeG,CAAO,EACvC,GAAI,CAACU,GAAc,OAAO,KAAKA,CAAU,EAAE,SAAW,EAAG,OAAO,KAEhE,KAAM,CAAE,QAAAC,EAAS,QAAAC,EAAS,SAAAC,CAAQ,EAAKC,GAAa,EAEpD,OAAAL,EAAQ,aAAeE,EACvBF,EAAQ,MAAQM,GAChBN,EAAQ,OAASG,EACjBH,EAAQ,OAASO,GACjBP,EAAQ,KAAOQ,GAEfR,EAAQ,WAAcS,GAAY,CAChC,MAAAH,GAAM,MAAMG,GAAW,GAAG,mBAAmB,CAAC,EACxC,IAAI,MAAMA,GAAW,GAAG,mBAAmB,CAAC,CACnD,EAEDT,EAAQ,IAAM,CACZ,cAAeI,CAChB,EAEMM,EAA6BT,EAAYF,EAAUC,CAAO,CAClE,CAED,SAASU,EAA6BC,EAAeZ,EAAUC,EAAS,OACtE,MAAMY,EAAc,CAAE,EACtB,IAAIC,EAAoB,KAExB,QAASC,KAAcH,EAAe,CACpC,IAAIf,GAASpC,EAAAmD,EAAcG,CAAU,IAAxB,YAAAtD,EAA2B,OACxC,GAAKoC,EACL,GAAI,CACF,MAAMmB,EAAaC,EAAcpB,CAAM,EACvC,GAAI,CAACmB,EAAY,SAEjBA,EAAW,QAASE,GAAc,CAChC,MAAMC,EAAYC,EAAkBvB,EAAQqB,EAAWjB,CAAO,EAC9D,GAAI,CAACkB,EAAW,OAEhB,IAAIE,EAAiB,KACjBC,EAAc9B,EAAQ,QAAQ,OAAQ,EAAE,EAExC,CAAE,YAAA+B,CAAW,EAAKC,GAAQhC,CAAO,EAGjCiC,GAAiBP,IAAcI,EAEnC,GAAIG,GAAgB,CAClB,GAAI,CAACZ,EAAY,OAAQ,CACvB,QAAQ,MACN,GACE,yIACA,CAACrB,CAAO,CACT,CACF,EACD,MACD,CACD6B,EAAiBR,EAAYC,CAAiB,CAC1D,MACYA,EAAoBD,EAAY,QAAU,EAG5C,MAAMa,GAAWC,EACfR,EACAI,EACAvB,EACAqB,EACAI,EACD,EAEDZ,EAAY,KAAKa,EAAQ,CACnC,CAAS,CACF,OAAQ5B,EAAK,CACZ,QAAQ,MAAM,GAAG,sCAAuC,CAACA,CAAG,CAAC,CAAC,CAC/D,CACF,CAED,OAAOe,CACR,CAED,SAASc,EACPR,EACAS,EACA5B,EACAqB,EAAiB,KACjBI,EAAiB,GACjB,CACAzB,EAAS,QAAUA,EAAS,SAAW,CAAE,EACzCA,EAAS,SAAWA,EAAS,UAAY,CAAE,EAE3C,IAAI0B,EAAW,IAAIP,EAGnBO,EAAS,yBAA2B1B,EACpC0B,EAAS,gBAAkBD,EAE3B,UAAWI,KAAO7B,EACZA,EAAS,eAAe6B,CAAG,IAC7BH,EAASG,CAAG,EAAI7B,EAAS6B,CAAG,GAIhCH,EAAS,QAAU,MAAOlC,IACnBoC,EAAKpC,CAAO,GACf,MAAMgC,GAAQhC,CAAO,EACdoC,EAAKpC,CAAO,GAKvB,MAAMsC,EAAS,IAAM9B,EAAS,IAE9B,OAAIyB,GACFC,EAAS,IAAMK,EAAeD,EAAQT,EAAgBK,CAAQ,EAEzDL,EAAe,kBAClBA,EAAe,gBAAkB,CAAE,GAGrCA,EAAe,gBAAgB,KAAKK,CAAQ,GAE5CA,EAAS,IAAMK,EAAeD,EAAQJ,CAAQ,EAGzCA,CACR,CAED,SAASM,EAAmBb,EAAW,CACjC,OAAOA,EAAU,UAAU,QAAW,aACxCA,EAAU,UAAU,OAAS,SAAUc,EAAaC,EAAK,SACvDA,EAAMA,GAAO,KAAK,cAElB,IAAIC,EAAK,KAET,GAAI,gBAAgB,MAAO,CACzB,KAAM,CAAE,UAAAC,CAAS,EAAKZ,GAAQ,KAAK,IAAI,OAAO,EAE9C,IAAIa,EADSD,EAAW,EACL,KAAM3I,GAAMA,EAAE,YAAcwI,CAAW,EAC1DE,GAAK1E,EAAA4E,GAAA,YAAAA,EAAO,UAAP,YAAA5E,EAAgB,QAAQ,OAAQ,IAEjC,CAACyE,GAAOC,IACVD,GAAMI,EAAA,KAAK,KAAMtI,GAAMA,EAAE,YAAY,OAASmI,CAAE,IAA1C,YAAAG,EAA6C,cAEtD,CAED,GAAI,CAAC,KAAK,IAAIL,CAAW,EACvB,eAAQ,KACN,GAAG,yCAA0C,CAACA,CAAW,CAAC,CAC3D,EACM,KAET,MAAMM,EAAM,KAAK,IAAIN,CAAW,EAAE,KAAMjI,GAAMA,EAAE,MAAQkI,CAAG,EAE3D,OAAKK,GAULA,EAAI,OAASA,EAAI,QAAU,KAAK,IAAI,KAEhC,gBAAgB,OAASJ,EACpBJ,EACLQ,EACA,KAAK,KAAMvI,GAAMA,EAAE,YAAY,OAASmI,CAAE,CAC3C,EAGIJ,EAAeQ,EAAK,IAAI,IAlB7B,QAAQ,KACN,GAAG,oDAAqD,CACtDL,EACAD,CACd,CAAa,CACF,EACM,KAaV,GAGE,OAAO,UAAU,eAAe,KAAKd,EAAU,UAAW,SAAS,GACtE,OAAO,eAAeA,EAAU,UAAW,UAAW,CACpD,aAAc,GACd,WAAY,GACZ,KAAM,CACJ,OAAK,KAAK,yBAOH,KAAK,yBAAyB,SANnC,QAAQ,KACN,gFACD,EACM,CAAE,EAIZ,EACD,IAAIqB,EAAU,CACZ,GAAI,CAAC,KAAK,yBAA0B,CAClC,QAAQ,KACN,gFACD,EACD,MACD,CACD,GAAI,CAAC,MAAM,QAAQA,CAAQ,EAAG,CAC5B,QAAQ,KACN,sEACAA,CACD,EACD,KAAK,yBAAyB,QAAU,CAAE,EAC1C,MACD,CACD,KAAK,yBAAyB,QAAUA,CACzC,CACT,CAAO,EAIA,OAAO,UAAU,eAAe,KAAKrB,EAAU,UAAW,UAAU,GAErE,OAAO,eAAeA,EAAU,UAAW,WAAY,CACrD,aAAc,GACd,WAAY,GACZ,KAAM,CACJ,OAAK,KAAK,yBAOH,KAAK,yBAAyB,UANnC,QAAQ,KACN,iFACD,EACM,CAAE,EAIZ,EACD,IAAIqB,EAAU,CACZ,GAAI,CAAC,KAAK,yBAA0B,CAClC,QAAQ,KACN,iFACD,EACD,MACD,CACD,GAAI,CAAC,MAAM,QAAQA,CAAQ,EAAG,CAC5B,QAAQ,KACN,uEACAA,CACD,EACD,KAAK,yBAAyB,SAAW,CAAE,EAC3C,MACD,CACD,KAAK,yBAAyB,SAAWA,CAC1C,CACT,CAAO,CAEJ,CAGD,SAASvB,EAAcpB,EAAQ,CAM7B,MACE,CAAC,GANqBA,EACrB,QAAQ,YAAa,EAAE,EACvB,QAAQ,oBAAqB,EAAE,EAIZ,SAAS,0BAA0B,CAAC,EAAE,IACvD4C,GAAUA,EAAM,CAAC,CAC1B,GAAW,CAAE,CAEV,CAED,SAASrB,EAAkBvB,EAAQqB,EAAWjB,EAAU,CAAA,EAAI,CAC1D,MAAMyC,EAAa,OAAO,KAAKzC,CAAO,EAChC0C,EAAe,OAAO,OAAO1C,CAAO,EAEpC2C,EAAgB;AAAA,IACtB/C,CAAM;AAAA,WACCqB,CAAS;AAAA,GAGVC,EAAY,IAAI,SAAS,GAAGuB,EAAYE,CAAa,EACzD,GAAGD,CACJ,EAED,OAAAX,EAAmBb,CAAS,EAErBA,CACR,CAED,SAASY,EAAec,EAAQnB,EAAUoB,EAAgB,KAAM,CAC9D,MAAMC,EAAa,OAAOF,GAAW,WAC/BG,EAAiB,IAAOD,EAAaF,EAAM,EAAKA,EAEtD,OAAO,IAAI,MACT,CAAE,EACF,CACE,IAAII,EAAQC,EAAM,CAChB,MAAMC,EAAiBH,EAAgB,EACvC,GAAKG,EAEL,OAAID,IAAS,WACPC,GAAkB,YAAaA,GACjC,QAAQ,KACN,GACE,6FACD,CACF,EAGI,CAACC,KAAeC,IAAS,CAC9B,MAAMC,EAAS5B,EAAS0B,CAAU,EAClC,GAAI,OAAOE,GAAW,WACpB,OAAOA,EAAO,MAAM5B,EAAU2B,CAAI,EAElC,QAAQ,KACN,GAAG,sCAAuC,CAACD,CAAU,CAAC,CACvD,CAEJ,GAGCF,IAAS,SACJxB,EAAS,OAAO,KACrBoB,GAAiBpB,EAAS,iBAAmBA,CAC9C,EAGIyB,EAAeD,CAAI,CAC3B,EACD,IAAID,EAAQC,EAAMK,EAAO,CACvB,MAAMJ,EAAiBH,EAAgB,EACvC,OAAKG,GAELA,EAAeD,CAAI,EAAIK,EAChB,IAHqB,EAI7B,EACD,IAAIN,EAAQC,EAAM,CAChB,MAAMC,EAAiBH,EAAgB,EACvC,OAAKG,EACED,KAAQC,EADa,EAE7B,EACD,QAAQF,EAAQ,CACd,MAAME,EAAiBH,EAAgB,EACvC,OAAKG,EACE,QAAQ,QAAQA,CAAc,EADT,CAAE,CAE/B,EACD,yBAAyBF,EAAQC,EAAM,CACrC,MAAMC,EAAiBH,EAAgB,EACvC,GAAKG,EACL,OAAO,QAAQ,yBAAyBA,EAAgBD,CAAI,CAC7D,CACF,CACF,CACF,CAED,MAAO,CACL,QAAAxD,EACA,YAAAK,EACA,oBAAA4B,CACD,CACH,CC7XA,MAAM6B,EAAiB,CAAE,EACnBC,EAAmB,CAAE,EAEpB,SAASC,GAAYlE,EAASmE,EAAS,CAC5C,KAAM,CAAE,YAAA5D,CAAW,EAAKR,GAAUC,CAAO,EAEzCgE,EAAehE,CAAO,EAAIgE,EAAehE,CAAO,GAAK,CAAE,EAElDgE,EAAehE,CAAO,EAAEmE,GAAW,EAAE,IACpCA,EACFH,EAAehE,CAAO,EAAEmE,CAAO,EAAIC,GAAuB,CACxD,QAASpE,EACT,KAAMmE,EACN,UAAW,SAAY,MAAME,EAAiB,EAC9C,SAAU,CACR,UAAW,IAAM,CACfC,EAAe,EACfvD,GAAM,QAAQ,GAAG,+BAA+B,CAAC,CAClD,EACD,QAAUT,GAAQ,CAChB,IAAIiE,EAAe,GAAG,yBAAyB,EAC/C,GAAIjE,EAAI,UAAY,iBAAkB,CACpC,MAAMkE,EAAYlE,EAAI,SACnB,IAAKmE,GAAQA,EAAI,MAAM,IAAI,EAAE,CAAC,EAAE,MAAM,EACtC,KAAK,IAAI,EACZF,EAAe,GAAG,6BAA8B,CAACC,CAAS,CAAC,CAC5D,CACDzD,GAAM,MAAMwD,CAAY,EACxB,QAAQ,MAAMjE,CAAG,CAClB,CACF,CACT,CAAO,GAED0D,EAAehE,CAAO,EAAE,EAAE,EAAIF,GAAS,CACrC,IAAK,CAAE,CACf,CAAO,EACDuE,EAAiB,IAIrB,MAAMK,EAAYC,GAAe,CAC/B,IAAK,iCACL,MAAO,aAAa3E,CAAO,IAAImE,CAAO,GACtC,KAAM,EAAAA,EACN,OAAQ,CACN,QAASnE,EACT,KAAMmE,CACP,EACD,UAAYS,GAASC,GAAeD,CAAI,CAC5C,CAAG,EAED,eAAeP,GAAkB,CAC/B,GACEJ,EAAiBjE,CAAO,GACxB,OAAOiE,EAAiBjE,CAAO,EAAEmE,GAAW,EAAE,GAAM,SAEpD,OAGGF,EAAiBjE,CAAO,IAC3BiE,EAAiBjE,CAAO,EAAI,CAAE,GAGhCiE,EAAiBjE,CAAO,EAAEmE,GAAW,EAAE,EAAI,CAAE,EAE7C,MAAMW,EAAmB,MAAMvE,EAC7ByD,EAAehE,CAAO,EAAEmE,GAAW,EAAE,CACtC,EAED,GAAI,CAACW,GAAoBA,EAAiB,SAAW,EAAG,OAExD,MAAMC,EAAuB,CAAE,EAC/B,UAAWC,KAAcF,EAAkB,CACzC,MAAMG,EAAgBD,EAAW,YAAY,KACxCD,EAAqBE,CAAa,IACrCF,EAAqBE,CAAa,EAAI,CAAE,GAE1CF,EAAqBE,CAAa,EAAE,KAAKD,CAAU,CACpD,CACDf,EAAiBjE,CAAO,EAAEmE,GAAW,EAAE,EAAIY,EAE3CG,EAAe,CAChB,CAED,SAASC,EAAepC,EAAM,KAAM,OAElC,MAAMkC,IADWlC,GAAA,YAAAA,EAAK,UAAW/C,GACF,QAAQ,OAAQ,EAAE,EAE3CoF,GAAiBnH,EAAAgG,EAAiBjE,CAAO,IAAxB,YAAA/B,EAA4BkG,GAAW,IAE9D,OACE,OAAOiB,GAAmB,UAC1BA,IAAmB,MACnB,CAAC,MAAM,QAAQA,CAAc,EAEtBA,EAAeH,CAAa,GAAK,CAAE,EAErC,CAAE,CACV,CAED,eAAeC,GAAgB,CAI7B,MAAMG,EAHU,gBAAkB,WAChC,QAAOpH,EAAA,KAAK,SAAL,YAAAA,EAAA,eAAmB6E,EAAA,KAAK,UAAL,YAAAA,EAAA,eAAoBwC,EAAA,KAAK,SAAL,YAAAA,EAAA,YAC/C,CACoB,CACtB,CAED,eAAehB,GAAgB,CAI7B,MAAMe,EAHU,gBAAkB,SAChC,QAAOpH,EAAA,KAAK,SAAL,YAAAA,EAAA,eAAmB6E,EAAA,KAAK,UAAL,YAAAA,EAAA,YAC3B,CACoB,CACtB,CAED,eAAeyC,GAAmB,CAIhC,MAAMF,EAHU,gBAAkB,OAChC,OAAMpH,EAAA,KAAK,UAAL,YAAAA,EAAA,WACP,CACoB,CACtB,CAED,eAAeuH,EAAgBC,EAAW1B,EAAOhB,EAAK,CACpD,MAAM2C,EAAW1B,EAAehE,CAAO,EAAEmE,GAAW,EAAE,EAAE,IAAIsB,CAAS,EACrEzB,EAAehE,CAAO,EAAEmE,GAAW,EAAE,EAAE,IAAIsB,CAAS,EAAI1B,EAExD,MAAM4B,EAAU,gBAAkB,OAChC,KAAK,MAAQ5B,EACb,KAAK,SAAW2B,EACZ3C,IACF,KAAK,cAAgBA,EAAI,KAE3B,OAAM9E,EAAA,KAAKwH,KAAL,YAAAxH,EAAA,WACP,EAED,GAAI,CACF,MAAMoH,EAAQM,EAAS5C,CAAG,CAC3B,OAAQ6C,EAAO,CACd,MAAA5B,EAAehE,CAAO,EAAEmE,GAAW,EAAE,EAAE,IAAIsB,CAAS,EAAIC,EACxD,QAAQ,MAAMC,CAAO,EACfC,CACP,CACF,CAED,eAAeC,EAAgB9C,EAAK,CAOlC,MAAMsC,EANU,gBAAkB,OAChC,KAAK,cAAgBtC,EAAI,IACzB,KAAK,MAAQA,EACb,OAAM9E,EAAA,KAAK8E,EAAI,YAAc,UAAvB,YAAA9E,EAAA,WACP,EAEsB8E,CAAG,CAC3B,CAED,eAAe+C,EAAmBC,EAAcC,EAAM,CAepD,MAAMX,EAdU,gBAAkB,OAChC,GAAIU,EAAa,OAAS,EAAG,CAC3B,MAAME,EAAc,MAAM,KAAKF,CAAY,EAAE,CAAC,EAC9C,KAAK,cAAgBC,EAAK,KAAMxL,GAAMA,EAAE,OAASyL,CAAW,EAAE,GACtE,MACQ,OAAO,KAAK,cAGd,KAAK,aAAe,MAAM,KAAKF,CAAY,EAC3C,KAAK,KAAOC,EAEZ,OAAM/H,EAAA,KAAK+H,EAAK,CAAC,EAAE,YAAc,aAA3B,YAAA/H,EAAA,WACP,EAEsB+H,EAAK,CAAC,CAAC,CAC/B,CAED,eAAeE,GAAsB,CACnC,MAAMrC,EAAO,MAAM,KAAK,SAAS,EAIjC,MAAMwB,EAHU,gBAAkB,SAChC,QAAOpH,EAAA,KAAK,eAAL,YAAAA,EAAA,UAAoB,GAAG4F,OAASf,EAAA,KAAK,iBAAL,YAAAA,EAAA,UAAsB,GAAGe,IACjE,CACoB,CACtB,CAED,eAAesC,GAAuB,CACpC,MAAMtC,EAAO,MAAM,KAAK,SAAS,EAKjC,MAAMwB,EAJU,gBAAkB,SAChC,QAAOpH,EAAA,KAAK,gBAAL,YAAAA,EAAA,UAAqB,GAAG4F,OAC7Bf,EAAA,KAAK,qBAAL,YAAAA,EAAA,UAA0B,GAAGe,IAChC,CACoB,CACtB,CAED,eAAewB,EAAQe,EAAQrD,EAAM,KAAM,CACzC,MAAM1B,EAAc8D,EAAepC,CAAG,EACtC,GAAI,CAAC1B,EAAY,OAAQ,OAEzB,MAAMgF,EAAQhF,EAAY,IACvB2D,GAAe,SAAY,MAAMoB,EAAO,KAAKpB,CAAU,CACzD,EAED,MAAMsB,GAAgBD,CAAK,CAC5B,CAiBD,MAAO,CACL,SAAUrC,EAAehE,CAAO,EAAEmE,GAAW,EAAE,EAC/C,UAAAO,EACA,eAAAS,EACA,cAAAD,EACA,cAAAZ,EACA,iBAAAiB,EACA,gBAAAC,EACA,gBAAAK,EACA,mBAAAC,EACA,gBAAAzB,EACA,oBAAA6B,EACA,qBAAAC,CACD,CACH,CCvOY,MAACI,GAAsB1I,EAAI,EAAK,EAC/B2I,GAAkB3I,EAAI,EAAE,EAExB4I,GAAmB5I,EAAI,EAAK,EAC5B6I,GAAe7I,EAAI,EAAE,EAErB8I,GAAiB9I,EAAI,EAAK","x_google_ignoreList":[0,1,2,3,4]}