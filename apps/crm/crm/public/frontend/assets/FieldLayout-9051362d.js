import{g as $e,f as Y,u as je,b as Ee,d as ze,e as Ae,_ as qe}from"./modals-6b779b18.js";import{_ as ie,D as ne,a as De,b as Se,E as ge,e as Fe,d as Re}from"./DragVerticalIcon-56a1fcba.js";import{I as Je}from"./IndicatorIcon-81343f13.js";import{b as re,n as se,u as _e,_ as me,q as pe,r as K,z as Pe,p as Ce}from"./index-1be1092b.js";import{m as W,i as Q,l as G,j as N,e as I,f as n,c as V,d as f,F as X,r as Z,g as v,w as b,b as y,q as P,a1 as ye,p as S,I as be,t as U,u as a,ap as Ye,ab as Me,z as he,k as Le,n as z,a4 as He,a5 as Ke,D as ve,a as We,aa as Qe,a7 as Xe,E as Ze,J as el,K as ke,S as q,P as J,v as ll,aq as fe,a9 as we,a3 as tl,al as ce,_ as Be,bm as ae,H as al,a8 as nl}from"./index-77a1adb3.js";import{_ as Ve}from"./Dropdown.vue_vue_type_script_setup_true_lang-20f66514.js";const ol={class:"group flex flex-wrap gap-1 min-h-20 p-1.5 rounded text-base bg-surface-gray-2 hover:bg-surface-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full"},sl={class:"w-full"},il=["onClick"],rl={__name:"TableMultiselectInput",props:W({doctype:{type:String,required:!0},errorMessage:{type:Function,default:m=>`${m} is an Invalid value`}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:W(["change"],["update:modelValue"]),setup(m,{emit:d}){const o=m,$=d,{getFields:T}=re(o.doctype),D=Q(m,"modelValue"),R=G([]),M=G(null),B=G(""),F=G(""),x=N(()=>F.value?{name:["not in",k.value]}:[]),k=N(()=>(M.value="",e(),F.value?D.value.map(r=>r[F.value.fieldname]):[])),e=()=>{if(M.value="",!F.value){let r=T();F.value=r==null?void 0:r.find(l=>["Link","User"].includes(l.fieldtype)),F.value||(M.value="Table MultiSelect requires a Table with atleast one Link field")}return F.value},w=r=>{if(M.value=null,D.value.some(l=>l[F.value.fieldname]===r)){M.value="Value already exists";return}r&&(D.value.push({[F.value.fieldname]:r}),$("change",D.value),!M.value&&(B.value=""))},g=r=>{let l=D.value.filter(t=>t[F.value.fieldname]!==r);$("change",l)},c=()=>{var l;if(B.value)return;let r=(l=R.value[R.value.length-1])==null?void 0:l.$el;document.activeElement===r?(D.value.pop(),$("change",D.value),be(()=>{D.value.length&&(r=R.value[R.value.length-1].$el,r==null||r.focus())})):r==null||r.focus()};return(r,l)=>{const t=I("FeatherIcon"),C=I("Button"),O=I("ErrorMessage");return n(),V("div",null,[f("div",ol,[(n(!0),V(X,null,Z(k.value,s=>(n(),v(C,{ref_for:!0,ref_key:"valuesRef",ref:R,key:s,label:s,theme:"gray",variant:"subtle",class:"rounded bg-surface-white hover:!bg-surface-gray-1 focus-visible:ring-outline-gray-4",onKeydownCapture:ye(P(c,["stop"]),["delete"])},{suffix:b(()=>[y(t,{class:"h-3.5",name:"x",onClick:P(A=>g(s),["stop"])},null,8,["onClick"])]),_:2},1032,["label","onKeydownCapture"]))),128)),f("div",sl,[F.value?(n(),v(ie,{key:0,class:"form-control flex-1 truncate cursor-text",value:B.value,filters:x.value,doctype:F.value.options,onChange:l[0]||(l[0]=s=>w(s)),hideMe:!0},{target:b(({togglePopover:s})=>[f("button",{class:"w-full h-7 cursor-text",onClick:P(s,["stop"])},null,8,il)]),_:1},8,["value","filters","doctype"])):S("",!0)])]),M.value?(n(),v(O,{key:0,class:"mt-2 pl-2",message:M.value},null,8,["message"])):S("",!0)])}}},ul={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},dl={class:"mt-4"},cl={class:"text-base text-ink-gray-8 mb-2"},ml={class:"px-1 py-0.5 bg-surface-gray-2 border border-outline-gray-modals rounded text-base text-ink-gray-8 flex items-center justify-between gap-2"},pl={class:"flex items-center gap-2"},vl={class:"flex items-center gap-2"},fl={class:"flex flex-col gap-1 text-ink-gray-9"},yl={class:"text-ink-gray-4 text-sm"},gl={class:"flex flex-col gap-2"},_l={__name:"GridFieldsEditorModal",props:W({doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const d=m,{getFields:o,getGridViewSettings:$,saveUserSettings:T}=re(d.doctype),D=Q(m,"modelValue"),R=G(!1),M=G(null),B=N(()=>JSON.stringify(x.value)!==JSON.stringify(F.value)),F=N(()=>{let l=o(),t=$(d.parentDoctype);return t.length?t.map(C=>{let O=l.find(s=>s.fieldname===C.fieldname);if(O)return O.columns=C.columns,r(O)}):l==null?void 0:l.filter(C=>C.in_list_view).map(C=>r(C))}),x=G(JSON.parse(JSON.stringify(F.value||[]))),k=N(()=>{var l;return(l=o())==null?void 0:l.filter(t=>!x.value.find(C=>C.fieldname===t.fieldname)&&!["Tab Break","Section Break","Column Break","Table"].includes(t.fieldtype))});function e(){x.value=JSON.parse(JSON.stringify(F.value||[]))}function w(l){x.value.push(r(l))}function g(l){const t=x.value.findIndex(C=>C.fieldname===l.fieldname);x.value.splice(t,1)}function c(){R.value=!0;let l=x.value.map(t=>({fieldname:t.fieldname,columns:t.columns}));if(l.length===0){M.value=__("At least one field is required");return}T(d.parentDoctype,"GridView",l,()=>{R.value=!1,D.value=!1})}function r(l){return{label:l.label,fieldname:l.fieldname,fieldtype:l.fieldtype,options:l.options,in_list_view:l.in_list_view,columns:l.columns||2}}return(l,t)=>{const C=I("Badge"),O=I("TextInput"),s=I("Button"),A=I("FeatherIcon");return n(),v(a(Me),{modelValue:D.value,"onUpdate:modelValue":t[1]||(t[1]=ee=>D.value=ee)},{"body-title":b(()=>[f("h3",ul,[f("div",null,U(l.__("Edit Grid Fields Layout")),1),B.value?(n(),v(C,{key:0,label:l.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):S("",!0)])]),"body-content":b(()=>{var ee,ue;return[f("div",dl,[f("div",cl,U(l.__("Fields Order")),1),(ee=F.value)!=null&&ee.length?(n(),v(a(ne),{key:0,list:x.value,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1"},{item:b(({element:j})=>[f("div",ml,[f("div",pl,[y(De,{class:"h-3.5 cursor-grab"}),f("div",null,U(j.label),1)]),f("div",vl,[y(O,{variant:"outline",type:"number",modelValue:j.columns,"onUpdate:modelValue":oe=>j.columns=oe,class:"w-20"},null,8,["modelValue","onUpdate:modelValue"]),y(s,{variant:"ghost",icon:"x",onClick:oe=>g(j)},null,8,["onClick"])])])]),_:1},8,["list"])):S("",!0),(ue=k.value)!=null&&ue.length?(n(),v(Se,{key:1,value:"",options:k.value,onChange:t[0]||(t[0]=j=>w(j))},{target:b(({togglePopover:j})=>[y(s,{class:"w-full mt-2",onClick:oe=>j(),label:l.__("Add Field")},{prefix:b(()=>[y(A,{name:"plus",class:"h-4"})]),_:2},1032,["onClick","label"])]),"item-label":b(({option:j})=>[f("div",fl,[f("div",null,U(j.label),1),f("div",yl,U(`${j.fieldname} - ${j.fieldtype}`),1)])]),_:1},8,["options"])):S("",!0),M.value?(n(),v(a(Ye),{key:2,class:"mt-3",message:M.value},null,8,["message"])):S("",!0)])]}),actions:b(()=>[f("div",gl,[B.value?(n(),v(s,{key:0,class:"w-full",label:l.__("Reset"),onClick:e},null,8,["label"])):S("",!0),y(s,{class:"w-full",label:l.__("Save"),variant:"solid",onClick:c,loading:R.value,disabled:!B.value},null,8,["label","loading","disabled"])])]),_:1},8,["modelValue"])}}},bl={class:"flex flex-col gap-5.5"},hl={class:"flex items-center gap-2 text-base bg-surface-gray-2 rounded py-2 px-2.5"},kl=["onClick"],xl=["onDblclick"],Cl={key:0,class:"flex items-center gap-2"},wl={key:1,class:"flex gap-1 items-center"},Vl={class:"section flex flex-col gap-1.5 p-2.5 bg-surface-gray-2 rounded cursor-grab"},$l={class:"flex items-center justify-between"},Dl=["onDblclick"],Sl={key:1,class:"flex gap-2 items-center"},Fl={class:"flex flex-col gap-1.5 flex-1 p-2 border border-dashed border-outline-gray-2 rounded bg-surface-modal cursor-grab"},Rl={class:"field px-2.5 py-2 border border-outline-gray-2 rounded text-base bg-surface-modal text-ink-gray-8 flex items-center leading-4 justify-between gap-2"},Ml={class:"flex items-center gap-2 truncate"},Ll={class:"truncate"},Bl={class:"gap-2 w-full"},Ol={class:"flex flex-col gap-1 text-ink-gray-9"},Ul={class:"text-ink-gray-4 text-sm"},Tl={class:"mt-5.5"},Gl={__name:"FieldLayoutEditor",props:{tabs:Object,doctype:String,onlyRequired:{type:Boolean,default:!1}},setup(m){const d=m,o=G(0),$=N(()=>d.tabs.length==1&&!d.tabs[0].label?"prefix":"default"),T=["Geolocation","Attach","Attach Image","HTML","Signature"],D=N(()=>({doctype:d.doctype,restricted_fieldtypes:T,as_array:!0,only_required:d.onlyRequired})),R=he({url:"crm.api.doc.get_fields_meta",params:D.value,cache:["fieldsMeta",d.doctype],auto:!0,transform:k=>{var g;let e=["name","owner","creation","modified","modified_by","docstatus","_comments","_user_tags","_assign","_liked_by"],w=[];return(g=d.tabs)==null||g.forEach(c=>{var r;(r=c.sections)==null||r.forEach(l=>{var t;(t=l.columns)==null||t.forEach(C=>{w=w.concat(C.fields)})})}),k.filter(c=>!w.find(r=>r.fieldname===c.fieldname)&&!e.includes(c.fieldname))}});function M(){if(d.tabs.length==1&&!d.tabs[0].label){d.tabs[0].label=__("New Tab");return}d.tabs.push({label:__("New Tab"),name:"tab_"+se(),sections:[]}),o.value=d.tabs.length?d.tabs.length-1:0}function B(k,e){e&&k.fields.push(e)}function F(k){return[{label:__("Edit"),icon:"edit",onClick:()=>k.editingLabel=!0},{label:__("Remove tab"),icon:"trash-2",onClick:()=>{if(d.tabs.length==1){d.tabs[0].label="";return}d.tabs.splice(o.value,1),o.value=o.value?o.value-1:0}}]}function x(k,e,w){let g=e.columns[e.columns.length-1];return[{group:__("Section"),items:[{label:__("Edit"),icon:"edit",onClick:()=>e.editingLabel=!0},{label:e.collapsible?__("Uncollapsible"):__("Collapsible"),icon:e.collapsible?"chevron-up":"chevron-down",onClick:()=>e.collapsible=!e.collapsible},{label:e.hideLabel?__("Show label"):__("Hide label"),icon:e.hideLabel?"eye":"eye-off",onClick:()=>e.hideLabel=!e.hideLabel},{label:e.hideBorder?__("Show border"):__("Hide border"),icon:"minus",onClick:()=>e.hideBorder=!e.hideBorder},{label:__("Remove section"),icon:"trash-2",onClick:()=>{w.sections.splice(w.sections.indexOf(e),1)},condition:()=>e.editable!==!1},{label:__("Remove and move columns to {0} section",[k==0?__("next"):__("previous")]),icon:"trash-2",onClick:()=>{let c=w.sections[k==0?k+1:k-1];k==0?c.columns=e.columns.concat(c.columns):c.columns=c.columns.concat(e.columns),w.sections.splice(w.sections.indexOf(e),1)},condition:()=>e.editable!==!1&&e.columns.length},{label:__("Move to previous tab"),icon:"corner-up-left",onClick:()=>{d.tabs[o.value-1].sections.push(e),d.tabs[o.value].sections.splice(d.tabs[o.value].sections.indexOf(e),1),o.value-=1},condition:()=>d.tabs[o.value-1]},{label:__("Move to next tab"),icon:"corner-up-right",onClick:()=>{d.tabs[o.value+1].sections.push(e),d.tabs[o.value].sections.splice(d.tabs[o.value].sections.indexOf(e),1),o.value+=1},condition:()=>d.tabs[o.value+1]}]},{group:__("Column"),items:[{label:__("Add column"),icon:"columns",onClick:()=>{e.columns.push({label:"",name:"column_"+se(),fields:[]})},condition:()=>e.columns.length<4},{label:__("Remove column"),icon:"trash-2",onClick:()=>e.columns.pop(),condition:()=>e.columns.length>1},{label:__("Remove and move fields to previous column"),icon:"trash-2",onClick:()=>{let c=e.columns[e.columns.length-2];c.fields=c.fields.concat(g.fields),e.columns.pop()},condition:()=>e.columns.length>1&&g.fields.length},{label:__("Move to next section"),icon:"corner-up-right",onClick:()=>{w.sections[k+1].columns.push(g),e.columns.pop()},condition:()=>w.sections[k+1]},{label:__("Move to previous section"),icon:"corner-up-left",onClick:()=>{w.sections[k-1].columns.push(g),e.columns.pop()},condition:()=>w.sections[k-1]}]}]}return Le(()=>d.doctype,()=>R.fetch(D.value),{immediate:!0}),(k,e)=>{const w=I("Input"),g=I("Button"),c=I("FeatherIcon");return n(),V("div",bl,[f("div",hl,[m.tabs.length&&m.tabs[o.value].label?(n(),v(a(ne),{key:0,list:m.tabs,"item-key":"name",class:"flex items-center gap-2",onEnd:e[2]||(e[2]=r=>o.value=r.newIndex)},{item:b(({element:r,index:l})=>[f("div",{class:z(["flex items-center gap-2 cursor-pointer rounded",[o.value==l?"text-ink-gray-9 bg-surface-white shadow-sm":"text-ink-gray-5 hover:text-ink-gray-9 hover:bg-surface-white hover:shadow-sm",r.editingLabel?"p-1":"px-2 py-1"]]),onClick:t=>o.value=l},[f("div",{onDblclick:()=>r.editingLabel=!0},[r.editingLabel?(n(),V("div",wl,[y(w,{modelValue:r.label,"onUpdate:modelValue":t=>r.label=t,onKeydown:ye(t=>r.editingLabel=!1,["enter"]),onBlur:t=>r.editingLabel=!1,onClick:e[0]||(e[0]=P(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),r.editingLabel?(n(),v(g,{key:0,icon:"check",variant:"ghost",onClick:t=>r.editingLabel=!1},null,8,["onClick"])):S("",!0)])):(n(),V("div",Cl,U(k.__(r.label)||k.__("Untitled")),1))],40,xl),r.label&&o.value==l?(n(),v(a(Ve),{key:0,options:F(r),class:"!h-4",onClick:e[1]||(e[1]=P(()=>{},["stop"]))},{default:b(()=>[y(g,{variant:"ghost",class:"!p-1 !h-4"},{default:b(()=>[y(c,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:2},1032,["options"])):S("",!0)],10,kl)]),_:1},8,["list"])):S("",!0),y(g,{variant:"ghost",class:"!h-6.5 !text-ink-gray-5 hover:!text-ink-gray-9",onClick:M,label:k.__("Add Tab")},{[$.value]:b(()=>[y(c,{name:"plus",class:"h-4"})]),_:2},1032,["label"])]),(n(!0),V(X,null,Z(m.tabs,(r,l)=>He((n(),V("div",{key:r.name},[y(a(ne),{list:r.sections,"item-key":"name",class:"flex flex-col gap-5.5"},{item:b(({element:t,index:C})=>[f("div",Vl,[f("div",$l,[f("div",{class:"flex h-7 max-w-fit cursor-pointer items-center gap-2 text-base font-medium leading-4 text-ink-gray-9",onDblclick:()=>t.editingLabel=!0},[t.editingLabel?(n(),V("div",Sl,[y(w,{modelValue:t.label,"onUpdate:modelValue":O=>t.label=O,onKeydown:ye(O=>t.editingLabel=!1,["enter"]),onBlur:O=>t.editingLabel=!1,onClick:e[3]||(e[3]=P(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),t.editingLabel?(n(),v(g,{key:0,icon:"check",variant:"ghost",onClick:O=>t.editingLabel=!1},null,8,["onClick"])):S("",!0)])):(n(),V("div",{key:0,class:z(["flex items-center gap-2",{"text-ink-gray-3":t.hideLabel||!t.label,italic:!t.label}])},[ve(U(k.__(t.label)||k.__("No label"))+" ",1),t.collapsible?(n(),v(c,{key:0,name:"chevron-down",class:"h-4 transition-all duration-300 ease-in-out"})):S("",!0)],2))],40,Dl),y(a(Ve),{options:x(C,t,r)},{default:b(()=>[y(g,{variant:"ghost"},{default:b(()=>[y(c,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:2},1032,["options"])]),y(a(ne),{class:"flex gap-2",list:t.columns,group:"columns","item-key":"name"},{item:b(({element:O})=>[f("div",Fl,[y(a(ne),{list:O.fields,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1.5",handle:".cursor-grab"},{item:b(({element:s})=>[f("div",Rl,[f("div",Ml,[y(De,{class:"h-3.5 cursor-grab"}),f("div",Ll,U(s.label),1)]),y(g,{variant:"ghost",class:"!size-4 rounded-sm",icon:"x",onClick:A=>O.fields.splice(O.fields.indexOf(s),1)},null,8,["onClick"])])]),_:2},1032,["list"]),a(R).data?(n(),v(Se,{key:0,value:"",options:a(R).data,onChange:s=>B(O,s)},{target:b(({togglePopover:s})=>[f("div",Bl,[y(g,{class:"w-full !h-8 !bg-surface-modal",variant:"outline",onClick:A=>s(),label:k.__("Add Field")},{prefix:b(()=>[y(c,{name:"plus",class:"h-4"})]),_:2},1032,["onClick","label"])])]),"item-label":b(({option:s})=>[f("div",Ol,[f("div",null,U(s.label),1),f("div",Ul,U(`${s.fieldname} - ${s.fieldtype}`),1)])]),_:2},1032,["options","onChange"])):S("",!0)])]),_:2},1032,["list"])])]),_:2},1032,["list"]),f("div",Tl,[y(g,{class:"w-full h-8",variant:"subtle",label:k.__("Add Section"),onClick:e[4]||(e[4]=t=>m.tabs[o.value].sections.push({label:k.__("New Section"),name:"section_"+a(se)(),opened:!0,columns:[{name:"column_"+a(se)(),fields:[]}]}))},{prefix:b(()=>[y(c,{name:"plus",class:"h-4"})]),_:1},8,["label"])])])),[[Ke,o.value==l]])),128))])}}},Il={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},Nl={class:"flex flex-col gap-3"},jl={class:"flex justify-between gap-2"},El={class:"flex flex-row-reverse gap-2"},zl={key:0},Al={__name:"GridRowFieldsModal",props:W({doctype:{type:String,default:"CRM Lead"},parentDoctype:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:W(["reload"],["update:modelValue"]),setup(m,{emit:d}){const o=m,$=d,T=Q(m,"modelValue"),D=G(o.doctype),R=G(!1),M=G(!1),B=G(!1);function F(){return{doctype:D.value,type:"Grid Row",parent_doctype:o.parentDoctype}}const x=he({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["GridRowFieldsModal",D.value,o.parentDoctype],params:F(),onSuccess(w){x.originalData=JSON.parse(JSON.stringify(w))}});Le(()=>x==null?void 0:x.data,()=>{M.value=JSON.stringify(x==null?void 0:x.data)!==JSON.stringify(x==null?void 0:x.originalData)},{deep:!0}),We(()=>Qe(k,100)());function k(){be(()=>{x.params=F(),x.reload()})}function e(){let w=JSON.parse(JSON.stringify(x.data));w.forEach(g=>{g.sections&&g.sections.forEach(c=>{c.columns.forEach(r=>{r.fields&&(r.fields=r.fields.map(l=>l.fieldname))})})}),R.value=!0,Ze("crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.save_fields_layout",{doctype:D.value,type:"Grid Row",layout:JSON.stringify(w)}).then(()=>{R.value=!1,T.value=!1,el("data_fields_layout_builder",{doctype:D.value}),$("reload")})}return(w,g)=>{const c=I("Button");return n(),v(a(Me),{modelValue:T.value,"onUpdate:modelValue":g[1]||(g[1]=r=>T.value=r),options:{size:"4xl"}},{"body-title":b(()=>[f("h3",Il,[f("div",null,U(w.__("Edit Grid Row Fields Layout")),1),M.value?(n(),v(a(Xe),{key:0,label:w.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):S("",!0)])]),"body-content":b(()=>{var r;return[f("div",Nl,[f("div",jl,[y(c,{label:B.value?w.__("Hide preview"):w.__("Show preview"),onClick:g[0]||(g[0]=l=>B.value=!B.value)},null,8,["label"]),f("div",El,[y(c,{loading:R.value,label:w.__("Save"),variant:"solid",onClick:e},null,8,["loading","label"]),y(c,{label:w.__("Reset"),onClick:k},null,8,["label"])])]),(r=a(x))!=null&&r.data?(n(),V("div",zl,[B.value?(n(),v(Ue,{key:1,tabs:a(x).data,data:{},preview:!0},null,8,["tabs"])):(n(),v(Gl,{key:0,tabs:a(x).data,doctype:D.value},null,8,["tabs","doctype"]))])):S("",!0)])]}),_:1},8,["modelValue"])}}},ql={class:"bg-surface-modal px-4 pb-6 pt-5 sm:px-6"},Jl={class:"mb-5 flex items-center justify-between"},Pl={class:"text-2xl font-semibold leading-6 text-ink-gray-9"},Yl={class:"flex items-center gap-1"},Hl={__name:"GridRowModal",props:W({index:Number,data:Object,doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{},showGridRowFieldsModal:{},showGridRowFieldsModalModifiers:{}}),emits:["update:modelValue","update:showGridRowFieldsModal"],setup(m){const d=m,{isManager:o}=_e(),$=Q(m,"modelValue"),T=Q(m,"showGridRowFieldsModal"),D=he({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["Grid Row",d.doctype,d.parentDoctype],params:{doctype:d.doctype,type:"Grid Row",parent_doctype:d.parentDoctype},auto:!0});function R(){T.value=!0,be(()=>$.value=!1)}return(M,B)=>{const F=I("Button"),x=I("FeatherIcon"),k=I("Dialog");return n(),v(k,{modelValue:$.value,"onUpdate:modelValue":B[1]||(B[1]=e=>$.value=e),options:{size:"4xl"}},{body:b(()=>[f("div",ql,[f("div",Jl,[f("div",null,[f("h3",Pl,U(M.__("Editing Row {0}",[m.index+1])),1)]),f("div",Yl,[a(o)()?(n(),v(F,{key:0,variant:"ghost",class:"w-7",onClick:R},{icon:b(()=>[y(ge)]),_:1})):S("",!0),y(F,{variant:"ghost",class:"w-7",onClick:B[0]||(B[0]=e=>$.value=!1)},{icon:b(()=>[y(x,{name:"x",class:"size-4"})]),_:1})])]),f("div",null,[a(D).data?(n(),v(Ue,{key:0,tabs:a(D).data,data:m.data,doctype:m.doctype,isGridRow:!0},null,8,["tabs","data","doctype"])):S("",!0)])])]),_:1},8,["modelValue"])}}},Kl=G(!1),Wl=G(""),Ql=G({}),Xl=G(null);function Oe(m,d,o,$){m&&(o==null||o(),Wl.value=m,Ql.value=d||{},Xl.value=$||null,Kl.value=!0)}const Zl={class:"flex flex-col flex-1 text-base"},et={key:0,class:"mb-1.5 text-sm text-ink-gray-5"},lt={key:1,class:"rounded border border-outline-gray-modals"},tt={class:"grid-header flex items-center rounded-t-[7px] bg-surface-gray-2 text-ink-gray-5 truncate"},at={class:"inline-flex items-center justify-center border-r border-outline-gray-2 h-8 p-2 w-12"},nt={class:"inline-flex items-center justify-center border-r border-outline-gray-2 py-2 px-1 w-12"},ot=["title"],st={key:0,class:"text-ink-red-2"},it={class:"w-12"},rt=["onClick"],ut={class:"grid-row-checkbox inline-flex h-9.5 items-center bg-surface-white justify-center border-r border-outline-gray-modals p-2 w-12"},dt={class:"flex h-9.5 items-center justify-center bg-surface-white border-r border-outline-gray-modals py-2 px-1 text-sm text-ink-gray-8 w-12"},ct={class:"cursor-pointer"},mt={key:3,class:"flex h-full bg-surface-white justify-center items-center"},pt={class:"edit-row w-12"},vt={key:1,class:"flex flex-col items-center rounded p-5 text-sm text-ink-gray-5"},ft={key:2,class:"mt-2 flex flex-row gap-2"},yt={__name:"Grid",props:W({label:{type:String,default:""},doctype:{type:String,required:!0},parentDoctype:{type:String,required:!0},parentFieldname:{type:String,required:!0}},{modelValue:{},modelModifiers:{},parent:{},parentModifiers:{}}),emits:["update:modelValue","update:parent"],setup(m){var xe;const d=m,o=q("triggerOnChange"),$=q("triggerOnRowAdd"),T=q("triggerOnRowRemove"),{getGridViewSettings:D,getFields:R,getFloatWithPrecision:M,getCurrencyWithPrecision:B,getFormattedCurrency:F,getGridSettings:x}=re(d.doctype);re(d.parentDoctype);const{getUser:k}=_e(),e=Q(m,"modelValue"),w=Q(m,"parent");J("parentDoc",w);const g=G(new Array(((xe=e.value)==null?void 0:xe.length)||[]).fill(!1)),c=ll(new Set),r=G(!1),l=G(!1),t=N(()=>x()),C=N(()=>{let u=D(d.parentDoctype),h=R();return u.length?u.map(le=>s(h.find(te=>te.fieldname===le.fieldname))):(h==null?void 0:h.filter(L=>L.in_list_view).map(L=>s(L)))||[]}),O=N(()=>{var u;return((u=R())==null?void 0:u.map(h=>s(h)))||[]});function s(u){return u.fieldtype==="Link"&&u.options!=="User"&&(u.create||(u.create=(h,L,le,te)=>{const de=p=>{p&&E(p.name,L,le)};Oe(L.options,h,te,de)})),{...u,filters:u.link_filters&&JSON.parse(u.link_filters),placeholder:u.placeholder||u.label}}const A=N(()=>{var h;if(!((h=C.value)!=null&&h.length))return"1fr";let u=D(d.parentDoctype);return u.length?u.map(L=>`minmax(0, ${L.columns||2}fr)`).join(" "):C.value.map(()=>"minmax(0, 2fr)").join(" ")}),ee=N(()=>{var u;return(u=e.value)!=null&&u.length?e.value.length===c.size:!1}),ue=N(()=>c.size>0),j=u=>{var h;u?(h=e.value)==null||h.forEach(L=>c.add(L.name)):c.clear()},oe=u=>{c.has(u.name)?c.delete(u.name):c.add(u.name)},Te=()=>{var h;const u={};(h=O.value)==null||h.forEach(L=>{L.fieldtype==="Check"?u[L.fieldname]=!1:u[L.fieldname]="",L.default&&(u[L.fieldname]=Ie(L.default,L.fieldtype))}),u.name=se(10),g.value.push(!1),u.__islocal=!0,u.idx=e.value.length+1,u.doctype=d.doctype,u.parentfield=d.parentFieldname,u.parenttype=d.parentDoctype,e.value.push(u),$(u)},Ge=()=>{e.value=e.value.filter(u=>!c.has(u.name)),T(c,e.value),g.value.pop(),c.clear()};function E(u,h,L){o(h.fieldname,u,L)}function Ie(u,h){if(["Float","Currency","Percent"].includes(h))return K(u);if(h==="Check"){if(["1","true","True"].includes(u))return!0;if(["0","false","False"].includes(u))return!1}else{if(h==="Int")return parseInt(u);if(u==="Today"&&h==="Date")return ae().format("YYYY-MM-DD");if(["Now","now"].includes(u)&&h==="Datetime")return ae().format("YYYY-MM-DD HH:mm:ss");if(["Now","now"].includes(u)&&h==="Time")return ae().format("HH:mm:ss");if(h==="Date")return ae(u).format("YYYY-MM-DD");if(h==="Datetime")return ae(u).format("YYYY-MM-DD HH:mm:ss");if(h==="Time")return ae(u).format("HH:mm:ss")}return u}return(u,h)=>{var le,te,de;const L=I("Button");return n(),V("div",Zl,[m.label?(n(),V("div",et,U(u.__(m.label)),1)):S("",!0),(le=C.value)!=null&&le.length?(n(),V("div",lt,[f("div",tt,[f("div",at,[y(a(fe),{class:"cursor-pointer duration-300",modelValue:ee.value,onClick:h[0]||(h[0]=P(p=>j(p.target.checked),["stop"]))},null,8,["modelValue"])]),f("div",nt,U(u.__("No")),1),f("div",{class:"grid w-full truncate",style:we({gridTemplateColumns:A.value})},[(n(!0),V(X,null,Z(C.value,p=>(n(),V("div",{class:z(["border-r border-outline-gray-2 p-2 truncate",["Int","Float","Currency","Percent"].includes(p.fieldtype)?"text-right":""]),key:p.fieldname,title:p.label},[ve(U(u.__(p.label))+" ",1),p.reqd||p.mandatory_depends_on&&p.mandatory_via_depends_on?(n(),V("span",st,"*")):S("",!0)],10,ot))),128))],4),f("div",it,[y(L,{class:"flex w-full items-center justify-center rounded !bg-surface-gray-2 border-0",variant:"outline",onClick:h[1]||(h[1]=p=>r.value=!0)},{icon:b(()=>[y(a(tl),{name:"settings",class:"size-4 text-ink-gray-7"})]),_:1})])]),(te=e.value)!=null&&te.length?(n(),v(a(ne),{key:0,class:"w-full",modelValue:e.value,"onUpdate:modelValue":h[3]||(h[3]=p=>e.value=p),delay:a(Pe)()?200:0,group:"rows","item-key":"name"},{item:b(({element:p,index:H})=>[f("div",{class:"grid-row flex cursor-pointer items-center border-b border-outline-gray-modals bg-surface-modals last:rounded-b last:border-b-0",onClick:P(()=>{t.value.editable_grid||(g.value[H]=!0)},["stop"])},[f("div",ut,[y(a(fe),{class:"cursor-pointer duration-300",modelValue:c.has(p.name),onClick:P(i=>oe(p),["stop"])},null,8,["modelValue","onClick"])]),f("div",dt,U(H+1),1),f("div",{class:"grid w-full h-9.5",style:we({gridTemplateColumns:A.value})},[(n(!0),V(X,null,Z(C.value,i=>(n(),V("div",{class:"border-r border-outline-gray-modals h-full",key:i.fieldname},[i.read_only&&!["Int","Float","Currency","Percent","Check"].includes(i.fieldtype)?(n(),v(a(ce),{key:0,type:"text",placeholder:i.placeholder,modelValue:p[i.fieldname],"onUpdate:modelValue":_=>p[i.fieldname]=_,disabled:!0},null,8,["placeholder","modelValue","onUpdate:modelValue"])):["Link","Dynamic Link"].includes(i.fieldtype)?(n(),v(ie,{key:1,class:"text-sm text-ink-gray-8",value:p[i.fieldname],doctype:i.fieldtype=="Link"?i.options:p[i.options],filters:i.filters,onChange:_=>E(_,i,p),onCreate:(_,Ne)=>i.create(u.v,i,p,Ne)},null,8,["value","doctype","filters","onChange","onCreate"])):i.fieldtype==="User"?(n(),v(ie,{key:2,class:"form-control",value:a(k)(p[i.fieldname]).full_name,doctype:i.options,filters:i.filters,onChange:_=>E(_,i,p),placeholder:i.placeholder,hideMe:!0},{prefix:b(()=>[y(me,{class:"mr-2",user:p[i.fieldname],size:"sm"},null,8,["user"])]),"item-prefix":b(({option:_})=>[y(me,{class:"mr-2",user:_.value,size:"sm"},null,8,["user"])]),"item-label":b(({option:_})=>[y(a(Be),{text:_.value},{default:b(()=>[f("div",ct,U(a(k)(_.value).full_name),1)]),_:2},1032,["text"])]),_:2},1032,["value","doctype","filters","onChange","placeholder"])):i.fieldtype==="Check"?(n(),V("div",mt,[y(a(fe),{class:"cursor-pointer duration-300",modelValue:p[i.fieldname],"onUpdate:modelValue":_=>p[i.fieldname]=_,disabled:!t.value.editable_grid,onChange:_=>E(_.target.checked,i,p)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])):i.fieldtype==="Date"?(n(),v(a(Fe),{key:4,value:p[i.fieldname],"icon-left":"",variant:"outline",formatter:_=>a(pe)(_,"",!0),"input-class":"border-none text-sm text-ink-gray-8",onChange:_=>E(_,i,p)},null,8,["value","formatter","onChange"])):i.fieldtype==="Datetime"?(n(),v(a(Re),{key:5,value:p[i.fieldname],"icon-left":"",variant:"outline",formatter:_=>a(pe)(_,"",!0,!0),"input-class":"border-none text-sm text-ink-gray-8",onChange:_=>E(_,i,p)},null,8,["value","formatter","onChange"])):["Small Text","Text","Long Text","Code"].includes(i.fieldtype)?(n(),v(a(ce),{key:6,rows:"1",type:"textarea",variant:"outline",value:p[i.fieldname],onChange:_=>E(_.target.value,i,p)},null,8,["value","onChange"])):i.fieldtype==="Select"?(n(),v(a(ce),{key:7,class:"text-sm text-ink-gray-8",type:"select",variant:"outline",modelValue:p[i.fieldname],"onUpdate:modelValue":_=>p[i.fieldname]=_,options:i.options,onChange:_=>E(_.target.value,i,p)},null,8,["modelValue","onUpdate:modelValue","options","onChange"])):i.fieldtype==="Password"?(n(),v($e,{key:8,variant:"outline",value:p[i.fieldname],disabled:!!i.read_only,onChange:_=>E(_.target.value,i,p)},null,8,["value","disabled","onChange"])):i.fieldtype==="Int"?(n(),v(Y,{key:9,class:"[&_input]:text-right",type:"text",variant:"outline",value:p[i.fieldname]||"0",disabled:!!i.read_only,onChange:_=>E(_.target.value,i,p)},null,8,["value","disabled","onChange"])):i.fieldtype==="Percent"?(n(),v(Y,{key:10,class:"[&_input]:text-right",type:"text",variant:"outline",value:a(M)(i.fieldname,p),formattedValue:(p[i.fieldname]||"0")+"%",disabled:!!i.read_only,onChange:_=>E(a(K)(_.target.value),i,p)},null,8,["value","formattedValue","disabled","onChange"])):i.fieldtype==="Float"?(n(),v(Y,{key:11,class:"[&_input]:text-right",type:"text",variant:"outline",value:a(M)(i.fieldname,p),formattedValue:p[i.fieldname],disabled:!!i.read_only,onChange:_=>E(a(K)(_.target.value),i,p)},null,8,["value","formattedValue","disabled","onChange"])):i.fieldtype==="Currency"?(n(),v(Y,{key:12,class:"[&_input]:text-right",type:"text",variant:"outline",value:a(B)(i.fieldname,p),formattedValue:a(F)(i.fieldname,p,w.value),disabled:!!i.read_only,onChange:_=>E(a(K)(_.target.value),i,p)},null,8,["value","formattedValue","disabled","onChange"])):(n(),v(a(ce),{key:13,class:"text-sm text-ink-gray-8",type:"text",variant:"outline",modelValue:p[i.fieldname],"onUpdate:modelValue":_=>p[i.fieldname]=_,options:i.options,onChange:_=>E(_.target.value,i,p)},null,8,["modelValue","onUpdate:modelValue","options","onChange"]))]))),128))],4),f("div",pt,[y(L,{class:"flex w-full items-center justify-center rounded border-0",variant:"outline",onClick:i=>g.value[H]=!0},{icon:b(()=>[y(ge,{class:"text-ink-gray-7"})]),_:2},1032,["onClick"])]),g.value[H]?(n(),v(Hl,{key:0,modelValue:g.value[H],"onUpdate:modelValue":i=>g.value[H]=i,showGridRowFieldsModal:l.value,"onUpdate:showGridRowFieldsModal":h[2]||(h[2]=i=>l.value=i),index:H,data:p,doctype:m.doctype,parentDoctype:m.parentDoctype},null,8,["modelValue","onUpdate:modelValue","showGridRowFieldsModal","index","data","doctype","parentDoctype"])):S("",!0)],8,rt)]),_:1},8,["modelValue","delay"])):(n(),V("div",vt,U(u.__("No Data")),1))])):S("",!0),(de=C.value)!=null&&de.length?(n(),V("div",ft,[ue.value?(n(),v(L,{key:0,label:u.__("Delete"),variant:"solid",theme:"red",onClick:Ge},null,8,["label"])):S("",!0),y(L,{label:u.__("Add Row"),onClick:Te},null,8,["label"])])):S("",!0),l.value?(n(),v(Al,{key:3,modelValue:l.value,"onUpdate:modelValue":h[4]||(h[4]=p=>l.value=p),doctype:m.doctype,parentDoctype:m.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):S("",!0),r.value?(n(),v(_l,{key:4,modelValue:r.value,"onUpdate:modelValue":h[5]||(h[5]=p=>r.value=p),doctype:m.doctype,parentDoctype:m.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):S("",!0)])}}},gt=ke(yt,[["__scopeId","data-v-ac9b945f"]]);const _t={key:0,class:"field"},bt={key:0,class:"mb-2 text-sm text-ink-gray-5"},ht={key:0,class:"text-ink-red-2"},kt={key:4,class:"flex items-center gap-2"},xt={key:0,class:"text-ink-red-3"},Ct={key:5,class:"flex gap-1"},wt={class:"cursor-pointer"},Vt={__name:"Field",props:{field:Object},setup(m){const d=m,o=q("data"),$=q("doctype"),T=q("preview"),D=q("isGridRow"),{getFormattedPercent:R,getFormattedFloat:M,getFormattedCurrency:B}=re($),{getUser:F}=_e();let x,k;if(D)x=q("triggerOnChange"),k=q("parentDoc");else{const{triggerOnChange:l,triggerOnRowAdd:t,triggerOnRowRemove:C}=je($,o.value.name);x=l,J("triggerOnChange",x),J("triggerOnRowAdd",t),J("triggerOnRowRemove",C)}const e=N(()=>{let l=d.field;l.fieldtype=="Select"&&typeof l.options=="string"&&(l.options=l.options.split(`
`).map(C=>({label:C,value:C})),l.options[0].value!==""&&l.options.unshift({label:"",value:""})),l.fieldtype==="Link"&&l.options==="User"&&(l.fieldtype="User"),l.fieldtype==="Link"&&l.options!=="User"&&(l.create||(l.create=(C,O)=>{const s=A=>{A&&c(A.name,l)};Oe(l.options,C,O,s)}));let t={...l,filters:l.link_filters&&JSON.parse(l.link_filters),placeholder:l.placeholder||l.label,display_via_depends_on:Ce(l.depends_on,o.value),mandatory_via_depends_on:Ce(l.mandatory_depends_on,o.value)};return t.visible=w(t),t});function w(l){return T.value?!0:(l.fieldtype=="Check"||l.read_only&&o.value[l.fieldname]||!l.read_only)&&(!l.depends_on||l.display_via_depends_on)&&!l.hidden}const g=l=>l.placeholder?__(l.placeholder):["Select","Link"].includes(l.fieldtype)?__("Select {0}",[__(l.label)]):__("Enter {0}",[__(l.label)]);function c(l,t){D?x(t.fieldname,l,o.value):x(t.fieldname,l)}function r(l,t){return t.fieldtype==="Duration"?l||0:l}return(l,t)=>{const C=I("FormControl"),O=I("Button");return e.value.visible?(n(),V("div",_t,[e.value.fieldtype!="Check"?(n(),V("div",bt,[ve(U(l.__(e.value.label))+" ",1),e.value.reqd||e.value.mandatory_depends_on&&e.value.mandatory_via_depends_on?(n(),V("span",ht,"*")):S("",!0)])):S("",!0),e.value.read_only&&!["Int","Float","Currency","Percent","Check"].includes(e.value.fieldtype)?(n(),v(C,{key:1,type:"text",placeholder:g(e.value),modelValue:a(o)[e.value.fieldname],"onUpdate:modelValue":t[0]||(t[0]=s=>a(o)[e.value.fieldname]=s),disabled:!0,description:e.value.description},null,8,["placeholder","modelValue","description"])):e.value.fieldtype==="Table"?(n(),v(gt,{key:2,modelValue:a(o)[e.value.fieldname],"onUpdate:modelValue":t[1]||(t[1]=s=>a(o)[e.value.fieldname]=s),parent:a(o),"onUpdate:parent":t[2]||(t[2]=s=>al(o)?o.value=s:null),doctype:e.value.options,parentDoctype:a($),parentFieldname:e.value.fieldname},null,8,["modelValue","parent","doctype","parentDoctype","parentFieldname"])):e.value.fieldtype==="Select"?(n(),v(C,{key:3,type:"select",class:z(["form-control",e.value.prefix?"prefix":""]),options:e.value.options,modelValue:a(o)[e.value.fieldname],"onUpdate:modelValue":t[3]||(t[3]=s=>a(o)[e.value.fieldname]=s),onChange:t[4]||(t[4]=s=>c(s.target.value,e.value)),placeholder:g(e.value),description:e.value.description},nl({_:2},[e.value.prefix?{name:"prefix",fn:b(()=>[y(Je,{class:z(e.value.prefix)},null,8,["class"])]),key:"0"}:void 0]),1032,["class","options","modelValue","placeholder","description"])):e.value.fieldtype=="Check"?(n(),V("div",kt,[y(C,{class:"form-control",type:"checkbox",modelValue:a(o)[e.value.fieldname],"onUpdate:modelValue":t[5]||(t[5]=s=>a(o)[e.value.fieldname]=s),onChange:t[6]||(t[6]=s=>c(s.target.checked,e.value)),disabled:!!e.value.read_only,description:e.value.description},null,8,["modelValue","disabled","description"]),f("label",{class:"text-sm text-ink-gray-5",onClick:t[7]||(t[7]=()=>{e.value.read_only||(a(o)[e.value.fieldname]=!a(o)[e.value.fieldname])})},[ve(U(l.__(e.value.label))+" ",1),e.value.mandatory?(n(),V("span",xt,"*")):S("",!0)])])):["Link","Dynamic Link"].includes(e.value.fieldtype)?(n(),V("div",Ct,[y(ie,{class:"form-control flex-1 truncate",value:a(o)[e.value.fieldname],doctype:e.value.fieldtype=="Link"?e.value.options:a(o)[e.value.options],filters:e.value.filters,onChange:t[8]||(t[8]=s=>c(s,e.value)),placeholder:g(e.value),onCreate:e.value.create},null,8,["value","doctype","filters","placeholder","onCreate"]),a(o)[e.value.fieldname]&&e.value.edit?(n(),v(O,{key:0,class:"shrink-0",label:l.__("Edit"),onClick:t[9]||(t[9]=s=>e.value.edit(a(o)[e.value.fieldname]))},{prefix:b(()=>[y(ge,{class:"h-4 w-4"})]),_:1},8,["label"])):S("",!0)])):e.value.fieldtype==="Table MultiSelect"?(n(),v(rl,{key:6,modelValue:a(o)[e.value.fieldname],"onUpdate:modelValue":t[10]||(t[10]=s=>a(o)[e.value.fieldname]=s),doctype:e.value.options,onChange:t[11]||(t[11]=s=>c(s,e.value))},null,8,["modelValue","doctype"])):e.value.fieldtype==="User"?(n(),v(ie,{key:7,class:"form-control",value:a(o)[e.value.fieldname]&&a(F)(a(o)[e.value.fieldname]).full_name,doctype:e.value.options,filters:e.value.filters,onChange:t[12]||(t[12]=s=>c(s,e.value)),placeholder:g(e.value),hideMe:!0},{prefix:b(()=>[a(o)[e.value.fieldname]?(n(),v(me,{key:0,class:"mr-2",user:a(o)[e.value.fieldname],size:"sm"},null,8,["user"])):S("",!0)]),"item-prefix":b(({option:s})=>[y(me,{class:"mr-2",user:s.value,size:"sm"},null,8,["user"])]),"item-label":b(({option:s})=>[y(a(Be),{text:s.value},{default:b(()=>[f("div",wt,U(a(F)(s.value).full_name),1)]),_:2},1032,["text"])]),_:1},8,["value","doctype","filters","placeholder"])):e.value.fieldtype==="Datetime"?(n(),v(a(Re),{key:8,value:a(o)[e.value.fieldname],formatter:s=>a(pe)(s,"",!0,!0),placeholder:g(e.value),"input-class":"border-none",onChange:t[13]||(t[13]=s=>c(s,e.value))},null,8,["value","formatter","placeholder"])):e.value.fieldtype==="Date"?(n(),v(a(Fe),{key:9,value:a(o)[e.value.fieldname],formatter:s=>a(pe)(s,"",!0),placeholder:g(e.value),"input-class":"border-none",onChange:t[14]||(t[14]=s=>c(s,e.value))},null,8,["value","formatter","placeholder"])):["Small Text","Text","Long Text","Code"].includes(e.value.fieldtype)?(n(),v(C,{key:10,type:"textarea",value:a(o)[e.value.fieldname],placeholder:g(e.value),description:e.value.description,onChange:t[15]||(t[15]=s=>c(s.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Password"?(n(),v($e,{key:11,value:a(o)[e.value.fieldname],placeholder:g(e.value),description:e.value.description,onChange:t[16]||(t[16]=s=>c(s.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Int"?(n(),v(Y,{key:12,type:"text",placeholder:g(e.value),value:a(o)[e.value.fieldname]||"0",disabled:!!e.value.read_only,description:e.value.description,onChange:t[17]||(t[17]=s=>c(s.target.value,e.value))},null,8,["placeholder","value","disabled","description"])):e.value.fieldtype==="Percent"?(n(),v(Y,{key:13,type:"text",value:a(R)(e.value.fieldname,a(o)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:t[18]||(t[18]=s=>c(a(K)(s.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Float"?(n(),v(Y,{key:14,type:"text",value:a(M)(e.value.fieldname,a(o)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:t[19]||(t[19]=s=>c(a(K)(s.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Currency"?(n(),v(Y,{key:15,type:"text",value:a(B)(e.value.fieldname,a(o),a(k)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:t[20]||(t[20]=s=>c(a(K)(s.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):(n(),v(C,{key:16,type:"text",placeholder:g(e.value),value:r(a(o)[e.value.fieldname],e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:t[21]||(t[21]=s=>c(s.target.value,e.value))},null,8,["placeholder","value","disabled","description"]))])):S("",!0)}}},$t=ke(Vt,[["__scopeId","data-v-c7c7d76c"]]),Dt={class:"column flex flex-col gap-4 w-full"},St={key:0,class:"text-ink-gray-9 max-w-fit text-base"},Ft={__name:"Column",props:{column:Object},setup(m){return(d,o)=>(n(),V("div",Dt,[m.column.label&&!m.column.hideLabel?(n(),V("div",St,U(m.column.label),1)):S("",!0),(n(!0),V(X,null,Z(m.column.fields,$=>(n(),v($t,{key:$.fieldname,field:$,"data-name":$.fieldname},null,8,["field","data-name"]))),128))]))}},Rt={__name:"Section",props:{section:Object},setup(m){const d=q("hasTabs");return(o,$)=>m.section.hidden?S("",!0):(n(),V("div",{key:0,class:z(["section",[m.section.hideBorder?"pt-4":"border-t border-outline-gray-modals mt-5 pt-5"]])},[y(Ee,{class:z(["flex sm:flex-row flex-col gap-4 text-lg font-medium",{"px-3 sm:px-5":a(d)}]),labelClass:["text-lg font-medium",{"px-3 sm:px-5":a(d)}],label:m.section.label,hideLabel:m.section.hideLabel||!m.section.label,opened:m.section.opened,collapsible:m.section.collapsible,collapseIconPosition:"right"},{default:b(()=>[(n(!0),V(X,null,Z(m.section.columns,T=>(n(),v(Ft,{key:T.name,class:z({"mt-6":m.section.label&&!m.section.hideLabel}),column:T,"data-name":T.name},null,8,["class","column","data-name"]))),128))]),_:1},8,["class","labelClass","label","hideLabel","opened","collapsible"])],2))}};const Mt={__name:"FieldLayout",props:{tabs:Array,data:Object,doctype:{type:String,default:"CRM Lead"},isGridRow:{type:Boolean,default:!1},preview:{type:Boolean,default:!1}},setup(m){const d=m,o=G(0),$=N(()=>d.tabs.length>1||d.tabs.length==1&&d.tabs[0].label);return J("data",N(()=>d.data)),J("hasTabs",$),J("doctype",d.doctype),J("preview",d.preview),J("isGridRow",d.isGridRow),(T,D)=>(n(),V("div",{class:z(["flex flex-col",{"border border-outline-gray-1 rounded-lg":$.value,"border-outline-gray-modals":$.value}])},[y(a(qe),{as:"div",modelValue:o.value,"onUpdate:modelValue":D[0]||(D[0]=R=>o.value=R),tabs:m.tabs},{default:b(()=>[y(a(ze),{class:z($.value?"border-outline-gray-modals":"hidden")},null,8,["class"]),y(a(Ae),null,{default:b(({tab:R})=>[f("div",{class:z(["sections overflow-hidden",{"my-4 sm:my-5":$.value}])},[(n(!0),V(X,null,Z(R.sections,M=>(n(),v(Rt,{key:M.name,section:M,"data-name":M.name},null,8,["section","data-name"]))),128))],2)]),_:1})]),_:1},8,["modelValue","tabs"])],2))}},Ue=ke(Mt,[["__scopeId","data-v-0a2ef829"]]);export{Ue as F,gt as G,Gl as _,Ql as a,Xl as b,Wl as c,Kl as s};
//# sourceMappingURL=FieldLayout-9051362d.js.map
