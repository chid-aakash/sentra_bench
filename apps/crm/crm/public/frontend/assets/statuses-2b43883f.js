import{I as x}from"./IndicatorIcon-81343f13.js";import{M as C,v as c,ad as f,x as I,J as L}from"./index-77a1adb3.js";import{x as D}from"./index-1be1092b.js";const J=C("crm-statuses",()=>{let i=c({}),n=c({}),h=c({});const m=f({doctype:"CRM Lead Status",fields:["name","color","position"],orderBy:"position asc",cache:"lead-statuses",initialData:[],auto:!0,transform(t){for(let a of t)a.color=D(a.color),i[a.name]=a;return t}}),d=f({doctype:"CRM Deal Status",fields:["name","color","position"],orderBy:"position asc",cache:"deal-statuses",initialData:[],auto:!0,transform(t){for(let a of t)a.color=D(a.color),n[a.name]=a;return t}}),u=f({doctype:"CRM Communication Status",fields:["name"],cache:"communication-statuses",initialData:[],auto:!0,transform(t){for(let a of t)h[a.name]=a;return t}});function v(t){return t||(t=m.data[0].name),i[t]}function M(t){return t||(t=d.data[0].name),n[t]}function N(t){return t||(t=u.data[0].name),u[t]}function R(t,a,r=[],l=null){var S,y,B;let s=t=="deal"?n:i;(S=a==null?void 0:a.statuses)!=null&&S.length&&(r=a.statuses),r!=null&&r.length&&(s=r.reduce((o,e)=>(o[e]=s[e],o),{}));let p=[];for(const o in s)p.push({label:(y=s[o])==null?void 0:y.name,value:(B=s[o])==null?void 0:B.name,icon:()=>{var e;return I(x,{class:(e=s[o])==null?void 0:e.color})},onClick:async()=>{var e;L("status_changed",{doctype:t,status:o}),a&&(await(l==null?void 0:l("status",(e=s[o])==null?void 0:e.name)),a.save.submit())}});return p}return{leadStatuses:m,dealStatuses:d,communicationStatuses:u,getLeadStatus:v,getDealStatus:M,getCommunicationStatus:N,statusOptions:R}});export{J as s};
//# sourceMappingURL=statuses-2b43883f.js.map
